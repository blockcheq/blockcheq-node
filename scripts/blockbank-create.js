var regulator = web3.personal.listAccounts[0];
var bank1 = web3.personal.listAccounts[1];
var bank2 = web3.personal.listAccounts[2];
var user1Addr = web3.personal.listAccounts[3];
var user2Addr = web3.personal.listAccounts[4];

console.log("Unlocking regulator");
web3.personal.unlockAccount(regulator,"",15000);
console.log("Unlocking bank1");
web3.personal.unlockAccount(bank1,"garfield123",15000);
console.log("Unlocking bank2");
web3.personal.unlockAccount(bank2,"garfield123",15000);

var blockbankContract = web3.eth.contract([{"constant":true,"inputs":[],"name":"name","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"codeHash","type":"bytes32"}],"name":"getBankAuthorizedByHash","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"_depositAccount","type":"string"},{"name":"_transactionID","type":"uint256"}],"name":"getTransactionCodelineHash","outputs":[{"name":"","type":"bytes32"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"codePosition","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"codeHash","type":"bytes32"}],"name":"getBankIdHash","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"getBanksLength","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"accountHash","type":"bytes32"},{"name":"_transactionID","type":"uint256"}],"name":"getTransactionCodelineHashByHash","outputs":[{"name":"","type":"bytes32"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"getAccountLength","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"_code","type":"string"}],"name":"getContract","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_code","type":"string"},{"name":"_name","type":"string"},{"name":"_account","type":"address"},{"name":"_contract","type":"address"}],"name":"addBank","outputs":[{"name":"id","type":"uint256"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"_newRegulator","type":"address"},{"name":"_name","type":"string"}],"name":"transferRegulator","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"_code","type":"string"}],"name":"getAccount","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"_depositAccount","type":"string"}],"name":"getTransactionsLength","outputs":[{"name":"length","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"_depositAccount","type":"string"},{"name":"_transactionID","type":"uint256"}],"name":"getTransactionContract","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_code","type":"string"},{"name":"_exists","type":"bool"}],"name":"setBankExistance","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"_code","type":"string"}],"name":"getName","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"codeHash","type":"bytes32"}],"name":"getContractByHash","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"codeHash","type":"bytes32"}],"name":"getBankExistanceByHash","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"accountHash","type":"bytes32"}],"name":"getTransactionsLengthByHash","outputs":[{"name":"length","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"bankAddress","type":"address"},{"name":"codeline","type":"string"},{"name":"_depositAccount","type":"string"},{"name":"timestamp","type":"uint256"}],"name":"addTransaction","outputs":[{"name":"id","type":"uint256"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"_bankAddress","type":"address"}],"name":"getCode","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"codeLength","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"accountHash","type":"bytes32"},{"name":"_transactionID","type":"uint256"}],"name":"getTransactionExistanceByHash","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"_depositAccount","type":"string"},{"name":"_transactionID","type":"uint256"}],"name":"getTransactionTimestamp","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"accountHash","type":"bytes32"},{"name":"_transactionID","type":"uint256"}],"name":"getTransactionBankCodeByHash","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"_code","type":"string"}],"name":"getBankAuthorized","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"_depositAccount","type":"string"},{"name":"_transactionID","type":"uint256"}],"name":"getTransactionBankCode","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"accountHash","type":"bytes32"},{"name":"_transactionID","type":"uint256"}],"name":"getTransactionTimestampByHash","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"codeHash","type":"bytes32"}],"name":"getCodeByHash","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"codeHash","type":"bytes32"}],"name":"getAccountByHash","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"index","type":"uint256"}],"name":"getAccountHash","outputs":[{"name":"","type":"bytes32"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"_code","type":"string"}],"name":"getBankId","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"_depositAccount","type":"string"},{"name":"_transactionID","type":"uint256"}],"name":"getTransactionExistance","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"index","type":"uint256"}],"name":"getBank","outputs":[{"name":"","type":"bytes32"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"regulator","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_code","type":"string"},{"name":"_name","type":"string"}],"name":"setBankName","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"_code","type":"string"},{"name":"_authorized","type":"bool"}],"name":"setBankAuthorized","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"_code","type":"string"},{"name":"_contract","type":"address"}],"name":"setBankContract","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"codeHash","type":"bytes32"}],"name":"getNameByHash","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"accountHash","type":"bytes32"},{"name":"_transactionID","type":"uint256"}],"name":"getTransactionContractByHash","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"_code","type":"string"}],"name":"getBankExistance","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"getRegulator","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_code","type":"string"},{"name":"_account","type":"address"}],"name":"setBankAddress","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"inputs":[{"name":"_name","type":"string"},{"name":"_codePosition","type":"uint256"},{"name":"_codeLength","type":"uint256"}],"payable":false,"stateMutability":"nonpayable","type":"constructor"},{"payable":false,"stateMutability":"nonpayable","type":"fallback"},{"anonymous":false,"inputs":[{"indexed":false,"name":"number","type":"uint256"},{"indexed":false,"name":"code","type":"string"},{"indexed":false,"name":"name","type":"string"},{"indexed":false,"name":"bankAddress","type":"address"},{"indexed":false,"name":"contractAddress","type":"address"},{"indexed":false,"name":"authorized","type":"bool"},{"indexed":false,"name":"exists","type":"bool"}],"name":"BankChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"name":"id","type":"uint256"},{"indexed":false,"name":"hashBankCode","type":"bytes32"},{"indexed":false,"name":"bankContract","type":"address"},{"indexed":false,"name":"hashCodeline","type":"bytes32"},{"indexed":false,"name":"timestamp","type":"uint256"},{"indexed":false,"name":"exists","type":"bool"}],"name":"TransactionChanged","type":"event"}]);
var blockcheqContract = web3.eth.contract([{"constant":true,"inputs":[{"name":"","type":"bytes32"}],"name":"checkId","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"name","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"position","outputs":[{"name":"","type":"uint8"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"account","type":"address"},{"name":"codeline","type":"string"}],"name":"addCheck","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"codeline","type":"string"},{"name":"amount","type":"uint256"},{"name":"date","type":"uint256"},{"name":"deliveredTo","type":"string"},{"name":"depositAccount","type":"string"},{"name":"securityCode","type":"string"}],"name":"fillAndDeliver","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"codeline","type":"string"}],"name":"getStatus","outputs":[{"name":"","type":"uint8"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_from","type":"address"},{"name":"_to","type":"address"},{"name":"_value","type":"uint256"}],"name":"transferFrom","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"code","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"codeline","type":"string"},{"name":"amount","type":"uint256"},{"name":"date","type":"uint256"},{"name":"deliveredTo","type":"string"},{"name":"depositAccount","type":"string"},{"name":"securityCode","type":"string"}],"name":"fill","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"decimals","outputs":[{"name":"","type":"uint8"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"codeline","type":"string"},{"name":"amount","type":"uint256"}],"name":"getStatusCheck","outputs":[{"name":"","type":"uint8"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"codeline","type":"string"},{"name":"depositAccount","type":"string"},{"name":"securityCode","type":"string"}],"name":"accept","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"ownerAccount","type":"address"}],"name":"deleteAccount","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"","type":"uint256"}],"name":"checks","outputs":[{"name":"owner","type":"address"},{"name":"codeline","type":"string"},{"name":"amount","type":"uint256"},{"name":"processDate","type":"uint256"},{"name":"status","type":"uint8"},{"name":"reason","type":"string"},{"name":"depositAccount","type":"string"},{"name":"deliveredTo","type":"string"},{"name":"securityCode","type":"bytes32"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"codeline","type":"string"},{"name":"securityCode","type":"string"}],"name":"notAccept","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"","type":"address"}],"name":"balanceOf","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"codeline","type":"string"}],"name":"getReason","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"owner","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"symbol","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"","type":"address"}],"name":"accountId","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"codeline","type":"string"},{"name":"amount","type":"uint256"}],"name":"getReasonCheck","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"ownerAccount","type":"address"},{"name":"numberAccount","type":"string"},{"name":"balanceAccount","type":"uint256"}],"name":"updateAccount","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"codeline","type":"string"}],"name":"sendToHost","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"codeline","type":"string"},{"name":"status","type":"uint8"},{"name":"reason","type":"string"}],"name":"setStatus","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"ownerAccount","type":"address"}],"name":"restoreAccount","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"ownerAccount","type":"address"},{"name":"numberAccount","type":"string"},{"name":"balanceAccount","type":"uint256"}],"name":"addAccount","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"","type":"uint256"}],"name":"accounts","outputs":[{"name":"owner","type":"address"},{"name":"number","type":"string"},{"name":"balance","type":"uint256"},{"name":"exists","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"newOwner","type":"address"}],"name":"transferOwnership","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"codeline","type":"string"},{"name":"amount","type":"uint256"},{"name":"date","type":"uint256"},{"name":"depositAccount","type":"string"},{"name":"securityCode","type":"string"}],"name":"deposit","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"inputs":[{"name":"bankCode","type":"string"},{"name":"codePosition","type":"uint8"},{"name":"bankName","type":"string"},{"name":"decimalUnits","type":"uint8"},{"name":"tokenSymbol","type":"string"},{"name":"regulatorContract","type":"address"},{"name":"demostrator","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"name":"from","type":"address"},{"indexed":true,"name":"to","type":"address"},{"indexed":false,"name":"value","type":"uint256"}],"name":"Transfer","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"name":"accountId","type":"uint256"},{"indexed":false,"name":"owner","type":"address"},{"indexed":false,"name":"number","type":"string"},{"indexed":false,"name":"balance","type":"uint256"},{"indexed":false,"name":"exists","type":"bool"}],"name":"AccountChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"name":"owner","type":"address"},{"indexed":false,"name":"codeline","type":"string"},{"indexed":false,"name":"bytesCodeline","type":"bytes32"},{"indexed":false,"name":"amount","type":"uint256"},{"indexed":false,"name":"processDate","type":"uint256"},{"indexed":false,"name":"status","type":"uint8"},{"indexed":false,"name":"reason","type":"string"},{"indexed":false,"name":"depositAccount","type":"string"},{"indexed":false,"name":"deliveredTo","type":"string"},{"indexed":false,"name":"securityCode","type":"bytes32"}],"name":"CheckChanged","type":"event"}]);

var bank1Code = "353";
var bank2Code = "535";

var bank1Name = "BlockcheqBank-1";
var bank2Name = "BlockcheqBank-2";
var deployGas = 6712390;
var transGas = 500000;


var deployBlockCheq = function(code, name, regulatorContract, demo, owner, callBack) {
	blockcheqContract.new(code, 0, name, 2, "â‚¬", regulatorContract, demo, {
		from: owner,
		data: '0x606060405234156200001057600080fd5b6040516200567c3803806200567c8339810160405280805182019190602001805191906020018051820191906020018051919060200180518201919060200180519190602001805160008054600160a060020a03191633600160a060020a03161781559092509050808060018a80516200008f9291602001906200042a565b5060018054620000b491600691600260001961010083851615020190911604620004af565b506002805460ff191660ff8b161790556003888051620000d99291602001906200042a565b506004868051620000ef9291602001906200042a565b506005805460ff1990811660ff8a1617909155600780549091168515151761010060a860020a031916610100600160a060020a03881602179055600080805260096020527fec8156718a8372b1db44bb411437d0870f3e3790d4a08526d024ce1b0b668f6b556080604051908101604052806000600160a060020a03168152602001602060405190810160405280600081525081526020016000815260200160011515815250600b808054809190600101620001ac919062000529565b81548110620001b757fe5b906000526020600020906004020160008201518154600160a060020a031916600160a060020a0391909116178155602082015181600101908051620002019291602001906200042a565b50604082015181600201556060820151600391909101805460ff191691151591909117905550600080805260086020527f5eff886ea0ce6ca488a3d6e336d6c0f75f46d19b42c06ce5ee98e42c96d256c755604051604051908190039020600c80546000838152600a602052604090208190559194506200028690600183016200055d565b915060009050610120604051908101604052806000600160a060020a03168152602001602060405190810160405280600081525081526020016000815260200160008152602001826009811115620002da57fe5b8152602001602060405190810160405280600081525081526020016020604051908101604052806000815250815260200160206040519081016040526000808252908252602090910152600c8054849081106200033357fe5b906000526020600020906009020160008201518154600160a060020a031916600160a060020a03919091161781556020820151816001019080516200037d9291602001906200042a565b506040820151816002015560608201518160030155608082015160048201805460ff19166001836009811115620003b057fe5b021790555060a082015181600501908051620003d19291602001906200042a565b5060c082015181600601908051620003ee9291602001906200042a565b5060e0820151816007019080516200040b9291602001906200042a565b5061010082015160089091015550620006cf9950505050505050505050565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f106200046d57805160ff19168380011785556200049d565b828001600101855582156200049d579182015b828111156200049d57825182559160200191906001019062000480565b50620004ab9291506200058c565b5090565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f10620004ea57805485556200049d565b828001600101855582156200049d57600052602060002091601f016020900482015b828111156200049d5782548255916001019190600101906200050c565b8154818355818115116200055857600402816004028360005260206000209182019101620005589190620005ac565b505050565b8154818355818115116200055857600902816009028360005260206000209182019101620005589190620005f8565b620005a991905b80821115620004ab576000815560010162000593565b90565b620005a991905b80821115620004ab578054600160a060020a03191681556000620005db600183018262000684565b506000600282015560038101805460ff19169055600401620005b3565b620005a991905b80821115620004ab578054600160a060020a0319168155600062000627600183018262000684565b6000600283018190556003830181905560048301805460ff191690556200065390600584019062000684565b6200066360068301600062000684565b6200067360078301600062000684565b5060006008820155600901620005ff565b50805460018160011615610100020316600290046000825580601f10620006ac5750620006cc565b601f016020900490600052602060002090810190620006cc91906200058c565b50565b614f9d80620006df6000396000f30060606040526004361061015b5763ffffffff60e060020a60003504166301fc59e1811461016057806306fdde031461018857806309218e9114610212578063111e54511461023b57806313fe60211461029c57806322b05ed2146103bc57806323b872dd1461043157806324c12bf61461046d5780632ec0cda414610480578063313ce567146105a057806338dcbb88146105b35780633da5517b146106065780634c1b64cb146106db578063618e7bd9146106fa578063678cabae1461095057806370a08231146109e35780638baa14f414610a025780638da5cb5b14610a5357806395d89b4114610a825780639bf8e5f314610a955780639dacacb414610ab4578063bfe388f614610b07578063e089d36e14610b68578063e1e5d6f114610bb9578063eed608e614610c58578063f235bfa414610c77578063f2a40db814610cd8578063f2fde38b14610d97578063fc1a6ab214610db6575b600080fd5b341561016b57600080fd5b610176600435610e94565b60405190815260200160405180910390f35b341561019357600080fd5b61019b610ea6565b60405160208082528190810183818151815260200191508051906020019080838360005b838110156101d75780820151838201526020016101bf565b50505050905090810190601f1680156102045780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b341561021d57600080fd5b610225610f44565b60405160ff909116815260200160405180910390f35b341561024657600080fd5b61029a60048035600160a060020a03169060446024803590810190830135806020601f82018190048102016040519081016040528181529291906020840183838082843750949650610f4d95505050505050565b005b34156102a757600080fd5b61029a60046024813581810190830135806020601f8201819004810201604051908101604052818152929190602084018383808284375094968635966020808201359750919550606081019450604090810135860180830194503592508291601f83018190048102019051908101604052818152929190602084018383808284378201915050505050509190803590602001908201803590602001908080601f01602080910402602001604051908101604052818152929190602084018383808284378201915050505050509190803590602001908201803590602001908080601f01602080910402602001604051908101604052818152929190602084018383808284375094965061178995505050505050565b34156103c757600080fd5b61040d60046024813581810190830135806020601f8201819004810201604051908101604052818152929190602084018383808284375094965061192695505050505050565b6040518082600981111561041d57fe5b60ff16815260200191505060405180910390f35b341561043c57600080fd5b610459600160a060020a03600435811690602435166044356119d3565b604051901515815260200160405180910390f35b341561047857600080fd5b61019b611a02565b341561048b57600080fd5b61029a60046024813581810190830135806020601f8201819004810201604051908101604052818152929190602084018383808284375094968635966020808201359750919550606081019450604090810135860180830194503592508291601f83018190048102019051908101604052818152929190602084018383808284378201915050505050509190803590602001908201803590602001908080601f01602080910402602001604051908101604052818152929190602084018383808284378201915050505050509190803590602001908201803590602001908080601f016020809104026020016040519081016040528181529291906020840183838082843750949650611a6d95505050505050565b34156105ab57600080fd5b610225611bf5565b34156105be57600080fd5b61040d60046024813581810190830135806020601f820181900481020160405190810160405281815292919060208401838380828437509496505093359350611bfe92505050565b341561061157600080fd5b61029a60046024813581810190830135806020601f8201819004810201604051908101604052818152929190602084018383808284378201915050505050509190803590602001908201803590602001908080601f01602080910402602001604051908101604052818152929190602084018383808284378201915050505050509190803590602001908201803590602001908080601f016020809104026020016040519081016040528181529291906020840183838082843750949650611c7395505050505050565b34156106e657600080fd5b61029a600160a060020a0360043516611dd7565b341561070557600080fd5b6107106004356121c7565b604051808a600160a060020a0316600160a060020a031681526020018060200189815260200188815260200187600981111561074857fe5b60ff1681526080810184905260a0838203810183528b546002600019600183161561010002019091160490820181905260208201916040810191606082019160c001908e9080156107da5780601f106107af576101008083540402835291602001916107da565b820191906000526020600020905b8154815290600101906020018083116107bd57829003601f168201915b505085810384528954600260001961010060018416150201909116048082526020909101908a90801561084e5780601f106108235761010080835404028352916020019161084e565b820191906000526020600020905b81548152906001019060200180831161083157829003601f168201915b50508581038352885460026000196101006001841615020190911604808252602090910190899080156108c25780601f10610897576101008083540402835291602001916108c2565b820191906000526020600020905b8154815290600101906020018083116108a557829003601f168201915b50508581038252875460026000196101006001841615020190911604808252602090910190889080156109365780601f1061090b57610100808354040283529160200191610936565b820191906000526020600020905b81548152906001019060200180831161091957829003601f168201915b50509d505050505050505050505050505060405180910390f35b341561095b57600080fd5b61029a60046024813581810190830135806020601f8201819004810201604051908101604052818152929190602084018383808284378201915050505050509190803590602001908201803590602001908080601f01602080910402602001604051908101604052818152929190602084018383808284375094965061222a95505050505050565b34156109ee57600080fd5b610176600160a060020a0360043516612429565b3415610a0d57600080fd5b61019b60046024813581810190830135806020601f8201819004810201604051908101604052818152929190602084018383808284375094965061243b95505050505050565b3415610a5e57600080fd5b610a666125b2565b604051600160a060020a03909116815260200160405180910390f35b3415610a8d57600080fd5b61019b6125c1565b3415610aa057600080fd5b610176600160a060020a036004351661262c565b3415610abf57600080fd5b61019b60046024813581810190830135806020601f82018190048102016040519081016040528181529291906020840183838082843750949650509335935061263e92505050565b3415610b1257600080fd5b61029a60048035600160a060020a03169060446024803590810190830135806020601f8201819004810201604051908101604052818152929190602084018383808284375094965050933593506126b092505050565b3415610b7357600080fd5b61029a60046024813581810190830135806020601f82018190048102016040519081016040528181529291906020840183838082843750949650612b2995505050505050565b3415610bc457600080fd5b61029a60046024813581810190830135806020601f8201819004810201604051908101604052818152929190602084018383808284378201915050505050509190803560ff1690602001909190803590602001908201803590602001908080601f016020809104026020016040519081016040528181529291906020840183838082843750949650612d9395505050505050565b3415610c6357600080fd5b61029a600160a060020a0360043516612f39565b3415610c8257600080fd5b61029a60048035600160a060020a03169060446024803590810190830135806020601f82018190048102016040519081016040528181529291906020840183838082843750949650509335935061319b92505050565b3415610ce357600080fd5b610cee600435613687565b604051600160a060020a03851681526040810183905281151560608201526080602082018181528554600260001961010060018416150201909116049183018290529060a083019086908015610d855780601f10610d5a57610100808354040283529160200191610d85565b820191906000526020600020905b815481529060010190602001808311610d6857829003601f168201915b50509550505050505060405180910390f35b3415610da257600080fd5b61029a600160a060020a03600435166136cb565b3415610dc157600080fd5b61029a60046024813581810190830135806020601f8201819004810201604051908101604052818152929190602084018383808284375094968635966020808201359750919550606081019450604090810135860180830194503592508291601f83018190048102019051908101604052818152929190602084018383808284378201915050505050509190803590602001908201803590602001908080601f01602080910402602001604051908101604052818152929190602084018383808284375094965061371595505050505050565b600a6020526000908152604090205481565b60038054600181600116156101000203166002900480601f016020809104026020016040519081016040528092919081815260200182805460018160011615610100020316600290048015610f3c5780601f10610f1157610100808354040283529160200191610f3c565b820191906000526020600020905b815481529060010190602001808311610f1f57829003601f168201915b505050505081565b60025460ff1681565b600080548190819033600160a060020a03908116911614610f6d57600080fd5b6007546101009004600160a060020a031663a0e1d694600160006040516020015260405160e060020a63ffffffff841602815260206004820190815282546002600019610100600184161502019091160460248301819052909182916044909101908490801561101e5780601f10610ff35761010080835404028352916020019161101e565b820191906000526020600020905b81548152906001019060200180831161100157829003601f168201915b505092505050602060405180830381600087803b151561103d57600080fd5b6102c65a03f1151561104e57600080fd5b5050506040518051905080156111595750600754600160a060020a03308116916101009004166335817773600160006040516020015260405160e060020a63ffffffff84160281526020600482019081528254600260001961010060018416150201909116046024830181905290918291604490910190849080156111145780601f106110e957610100808354040283529160200191611114565b820191906000526020600020905b8154815290600101906020018083116110f757829003601f168201915b505092505050602060405180830381600087803b151561113357600080fd5b6102c65a03f1151561114457600080fd5b50505060405180519050600160a060020a0316145b151561116457600080fd5b600160a060020a0385166000908152600960205260408120541180156111c55750600160a060020a038516600090815260096020526040902054600b805490919081106111ad57fe5b600091825260209091206003600490920201015460ff165b15156111d057600080fd5b836040518082805190602001908083835b602083106112005780518252601f1990920191602091820191016111e1565b6001836020036101000a03801982511681845116179092525050509190910192506040915050519081900390206000818152600a60205260409020549093501561124957600080fd5b600c80546000858152600a602052604090208190559061126c9060018301614d43565b9150600090506101206040519081016040528086600160a060020a0316815260200185815260200160008152602001600081526020018260098111156112ae57fe5b81526020016040805190810160405280600c81526020017f49737375656420636865636b000000000000000000000000000000000000000081525081526020016020604051908101604052806000815250815260200160206040519081016040526000808252908252602090910152600c80548490811061132b57fe5b90600052602060002090600902016000820151815473ffffffffffffffffffffffffffffffffffffffff1916600160a060020a0391909116178155602082015181600101908051611380929160200190614d6f565b506040820151816002015560608201518160030155608082015160048201805460ff191660018360098111156113b257fe5b021790555060a0820151816005019080516113d1929160200190614d6f565b5060c0820151816006019080516113ec929160200190614d6f565b5060e082015181600701908051611407929160200190614d6f565b5061010082015160089091015550600c80547f4ff61b0ba1398d6fcec2382497f16051aad31ee5aa59d5bea3827c5b44ddacb991908490811061144657fe5b6000918252602090912060099091020154600c8054600160a060020a0390921691879187918790811061147557fe5b906000526020600020906009020160020154600c8781548110151561149657fe5b906000526020600020906009020160030154600c888154811015156114b757fe5b6000918252602090912060046009909202010154600c805460ff909216918a9081106114df57fe5b9060005260206000209060090201600501600c8a8154811015156114ff57fe5b9060005260206000209060090201600601600c8b81548110151561151f57fe5b9060005260206000209060090201600701600c8c81548110151561153f57fe5b906000526020600020906009020160080154604051600160a060020a038b1681526040810189905260608101889052608081018790526020810160a0820187600981111561158957fe5b60ff168152602001806020018060200180602001866000191660001916815260200185810385528e818151815260200191508051906020019080838360005b838110156115e05780820151838201526020016115c8565b50505050905090810190601f16801561160d5780820380516001836020036101000a031916815260200191505b5085810384528954600260001961010060018416150201909116048082526020909101908a9080156116805780601f1061165557610100808354040283529160200191611680565b820191906000526020600020905b81548152906001019060200180831161166357829003601f168201915b50508581038352885460026000196101006001841615020190911604808252602090910190899080156116f45780601f106116c9576101008083540402835291602001916116f4565b820191906000526020600020905b8154815290600101906020018083116116d757829003601f168201915b50508581038252875460026000196101006001841615020190911604808252602090910190889080156117685780601f1061173d57610100808354040283529160200191611768565b820191906000526020600020905b81548152906001019060200180831161174b57829003601f168201915b50509e50505050505050505050505050505060405180910390a15050505050565b6000806000611799896000613a74565b9250925087600c838154811015156117ad57fe5b90600052602060002090600902016002018190555086600c838154811015156117d257fe5b90600052602060002090600902016003018190555085600c838154811015156117f757fe5b9060005260206000209060090201600701908051611819929160200190614d6f565b508351151561184d57600c8054600091908490811061183457fe5b60009182526020909120600860099092020101556118d0565b836040518082805190602001908083835b6020831061187d5780518252601f19909201916020918201910161185e565b6001836020036101000a03801982511681845116179092525050509190910192506040915050518091039020905080600c838154811015156118bb57fe5b60009182526020909120600860099092020101555b61191182600260408051908101604052600f81527f44656c69766572656420636865636b000000000000000000000000000000000060208201528c87613b2c565b61191b8286613ec0565b505050505050505050565b6000806000836040518082805190602001908083835b6020831061195b5780518252601f19909201916020918201910161193c565b6001836020036101000a038019825116818451161790925250505091909101925060409150505180910390209150611992826140dc565b90508015156119a457600892506119cc565b600c8054829081106119b257fe5b600091825260209091206004600990920201015460ff1692505b5050919050565b6000805433600160a060020a039081169116146119ef57600080fd5b6119fa84848461410f565b949350505050565b60018054600181600116156101000203166002900480601f016020809104026020016040519081016040528092919081815260200182805460018160011615610100020316600290048015610f3c5780601f10610f1157610100808354040283529160200191610f3c565b6000806000611a7d896000613a74565b9250925087600c83815481101515611a9157fe5b90600052602060002090600902016002018190555086600c83815481101515611ab657fe5b90600052602060002090600902016003018190555085600c83815481101515611adb57fe5b9060005260206000209060090201600701908051611afd929160200190614d6f565b5083511515611b3157600c80546000919084908110611b1857fe5b6000918252602090912060086009909202010155611bb4565b836040518082805190602001908083835b60208310611b615780518252601f199092019160209182019101611b42565b6001836020036101000a03801982511681845116179092525050509190910192506040915050518091039020905080600c83815481101515611b9f57fe5b60009182526020909120600860099092020101555b61191182600160408051908101604052600c81527f46696c6c656420636865636b000000000000000000000000000000000000000060208201528c87613b2c565b60055460ff1681565b600080836040518082805190602001908083835b60208310611c315780518252601f199092019160209182019101611c12565b6001836020036101000a038019825116818451161790925250505091909101925060409150505180910390209050611c6981846144de565b91505b5092915050565b600080611c81856002613a74565b91509150611c8f818461458a565b15611d8557611d8081600c83815481101515611ca757fe5b6000918252602090912060046009909202010154600c805460ff9092169185908110611ccf57fe5b90600052602060002090600902016005018054600181600116156101000203166002900480601f016020809104026020016040519081016040528092919081815260200182805460018160011615610100020316600290048015611d745780601f10611d4957610100808354040283529160200191611d74565b820191906000526020600020905b815481529060010190602001808311611d5757829003601f168201915b50505050508886613b2c565b611dd0565b611dc681600360408051908101604052600e81527f416363657074656420636865636b00000000000000000000000000000000000060208201528886613b2c565b611dd08185613ec0565b5050505050565b6000805433600160a060020a03908116911614611df357600080fd5b6007546101009004600160a060020a031663a0e1d694600160006040516020015260405160e060020a63ffffffff8416028152602060048201908152825460026000196101006001841615020190911604602483018190529091829160449091019084908015611ea45780601f10611e7957610100808354040283529160200191611ea4565b820191906000526020600020905b815481529060010190602001808311611e8757829003601f168201915b505092505050602060405180830381600087803b1515611ec357600080fd5b6102c65a03f11515611ed457600080fd5b505050604051805190508015611fdf5750600754600160a060020a03308116916101009004166335817773600160006040516020015260405160e060020a63ffffffff8416028152602060048201908152825460026000196101006001841615020190911604602483018190529091829160449091019084908015611f9a5780601f10611f6f57610100808354040283529160200191611f9a565b820191906000526020600020905b815481529060010190602001808311611f7d57829003601f168201915b505092505050602060405180830381600087803b1515611fb957600080fd5b6102c65a03f11515611fca57600080fd5b50505060405180519050600160a060020a0316145b1515611fea57600080fd5b600160a060020a0382166000908152600960205260408120541161200d57600080fd5b50600160a060020a038116600090815260096020526040812054600b80549192918390811061203857fe5b906000526020600020906004020160030160006101000a81548160ff0219169083151502179055507f4dcaa4559c4b27f5958620b52cdc8d574d3f5b1749809568f14bafbe6c2118e081600b8381548110151561209157fe5b6000918252602090912060049091020154600b8054600160a060020a0390921691859081106120bc57fe5b9060005260206000209060040201600101600b858154811015156120dc57fe5b906000526020600020906004020160020154600b868154811015156120fd57fe5b600091825260209091206003600490920201015460ff16604051858152600160a060020a038516602082015260608101839052811515608082015260a0604082018181528554600260001961010060018416150201909116049183018290529060c0830190869080156121b15780601f10612186576101008083540402835291602001916121b1565b820191906000526020600020905b81548152906001019060200180831161219457829003601f168201915b5050965050505050505060405180910390a15050565b600c8054829081106121d557fe5b6000918252602090912060099091020180546002820154600383015460048401546008850154600160a060020a03909416955060018501949293919260ff909116916005820191600681019160079091019089565b600080612238846002613a74565b91509150612246818461458a565b1561233c5761233781600c8381548110151561225e57fe5b6000918252602090912060046009909202010154600c805460ff909216918590811061228657fe5b90600052602060002090600902016005018054600181600116156101000203166002900480601f01602080910402602001604051908101604052809291908181526020018280546001816001161561010002031660029004801561232b5780601f106123005761010080835404028352916020019161232b565b820191906000526020600020905b81548152906001019060200180831161230e57829003601f168201915b50505050508786613b2c565b612423565b61237d81600760408051908101604052601281527f4e6f7420416363657074656420636865636b000000000000000000000000000060208201528786613b2c565b6007600c8281548110151561238e57fe5b906000526020600020906009020160040160006101000a81548160ff021916908360098111156123ba57fe5b021790555060408051908101604052601281527f4e6f7420416363657074656420636865636b00000000000000000000000000006020820152600c80548390811061240157fe5b9060005260206000209060090201600501908051611dd0929160200190614d6f565b50505050565b60086020526000908152604090205481565b612443614ded565b600080836040518082805190602001908083835b602083106124765780518252601f199092019160209182019101612457565b6001836020036101000a0380198251168184511617909252505050919091019250604091505051809103902091506124ad826140dc565b90508015156124f15760408051908101604052600f81527f436865636b206e6f7420666f756e640000000000000000000000000000000000602082015292506119cc565b600c8054829081106124ff57fe5b90600052602060002090600902016005018054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156125a45780601f10612579576101008083540402835291602001916125a4565b820191906000526020600020905b81548152906001019060200180831161258757829003601f168201915b505050505092505050919050565b600054600160a060020a031681565b60048054600181600116156101000203166002900480601f016020809104026020016040519081016040528092919081815260200182805460018160011615610100020316600290048015610f3c5780601f10610f1157610100808354040283529160200191610f3c565b60096020526000908152604090205481565b612646614ded565b6000836040518082805190602001908083835b602083106126785780518252601f199092019160209182019101612659565b6001836020036101000a038019825116818451161790925250505091909101925060409150505180910390209050611c6981846146a5565b6000805433600160a060020a039081169116146126cc57600080fd5b6007546101009004600160a060020a031663a0e1d694600160006040516020015260405160e060020a63ffffffff841602815260206004820190815282546002600019610100600184161502019091160460248301819052909182916044909101908490801561277d5780601f106127525761010080835404028352916020019161277d565b820191906000526020600020905b81548152906001019060200180831161276057829003601f168201915b505092505050602060405180830381600087803b151561279c57600080fd5b6102c65a03f115156127ad57600080fd5b5050506040518051905080156128b85750600754600160a060020a03308116916101009004166335817773600160006040516020015260405160e060020a63ffffffff84160281526020600482019081528254600260001961010060018416150201909116046024830181905290918291604490910190849080156128735780601f1061284857610100808354040283529160200191612873565b820191906000526020600020905b81548152906001019060200180831161285657829003601f168201915b505092505050602060405180830381600087803b151561289257600080fd5b6102c65a03f115156128a357600080fd5b50505060405180519050600160a060020a0316145b15156128c357600080fd5b600160a060020a0384166000908152600960205260408120541180156129245750600160a060020a038416600090815260096020526040902054600b8054909190811061290c57fe5b600091825260209091206003600490920201015460ff165b151561292f57600080fd5b50600160a060020a038316600090815260096020526040902054600b80548491908390811061295a57fe5b906000526020600020906004020160010190805161297c929160200190614d6f565b5081600b8281548110151561298d57fe5b6000918252602080832060026004909302019190910192909255600160a060020a0386168152600890915260409020829055600b80547f4dcaa4559c4b27f5958620b52cdc8d574d3f5b1749809568f14bafbe6c2118e0918391829081106129f157fe5b6000918252602090912060049091020154600b8054600160a060020a039092169185908110612a1c57fe5b9060005260206000209060040201600101600b85815481101515612a3c57fe5b906000526020600020906004020160020154600b86815481101515612a5d57fe5b600091825260209091206003600490920201015460ff16604051858152600160a060020a038516602082015260608101839052811515608082015260a0604082018181528554600260001961010060018416150201909116049183018290529060c083019086908015612b115780601f10612ae657610100808354040283529160200191612b11565b820191906000526020600020905b815481529060010190602001808311612af457829003601f168201915b5050965050505050505060405180910390a150505050565b60008054819033600160a060020a03908116911614612b4757600080fd5b6007546101009004600160a060020a031663a0e1d694600160006040516020015260405160e060020a63ffffffff8416028152602060048201908152825460026000196101006001841615020190911604602483018190529091829160449091019084908015612bf85780601f10612bcd57610100808354040283529160200191612bf8565b820191906000526020600020905b815481529060010190602001808311612bdb57829003601f168201915b505092505050602060405180830381600087803b1515612c1757600080fd5b6102c65a03f11515612c2857600080fd5b505050604051805190508015612d335750600754600160a060020a03308116916101009004166335817773600160006040516020015260405160e060020a63ffffffff8416028152602060048201908152825460026000196101006001841615020190911604602483018190529091829160449091019084908015612cee5780601f10612cc357610100808354040283529160200191612cee565b820191906000526020600020905b815481529060010190602001808311612cd157829003601f168201915b505092505050602060405180830381600087803b1515612d0d57600080fd5b6102c65a03f11515612d1e57600080fd5b50505060405180519050600160a060020a0316145b1515612d3e57600080fd5b612d49836004613a74565b91509150612d8e81600560408051908101604052600d81527f436865636b20696e20686f73740000000000000000000000000000000000000060208201528686613b2c565b505050565b60008054819033600160a060020a03908116911614612db157600080fd5b846040518082805190602001908083835b60208310612de15780518252601f199092019160209182019101612dc2565b6001836020036101000a03801982511681845116179092525050509190910192506040915050519081900390206000818152600a60205260408120549193509011612e2b57600080fd5b612e34826140dc565b9050612e4081856148ff565b1515612e4b57600080fd5b6000846009811115612e5957fe5b1415612f2c576000600c82815481101515612e7057fe5b9060005260206000209060090201600201819055506000600c82815481101515612e9657fe5b906000526020600020906009020160030181905550602060405190810160405260008152600c805483908110612ec857fe5b9060005260206000209060090201600601908051612eea929160200190614d6f565b50602060405190810160405260008152600c805483908110612f0857fe5b9060005260206000209060090201600701908051612f2a929160200190614d6f565b505b611dd08185858886613b2c565b6000805433600160a060020a03908116911614612f5557600080fd5b6007546101009004600160a060020a031663a0e1d694600160006040516020015260405160e060020a63ffffffff84160281526020600482019081528254600260001961010060018416150201909116046024830181905290918291604490910190849080156130065780601f10612fdb57610100808354040283529160200191613006565b820191906000526020600020905b815481529060010190602001808311612fe957829003601f168201915b505092505050602060405180830381600087803b151561302557600080fd5b6102c65a03f1151561303657600080fd5b5050506040518051905080156131415750600754600160a060020a03308116916101009004166335817773600160006040516020015260405160e060020a63ffffffff84160281526020600482019081528254600260001961010060018416150201909116046024830181905290918291604490910190849080156130fc5780601f106130d1576101008083540402835291602001916130fc565b820191906000526020600020905b8154815290600101906020018083116130df57829003601f168201915b505092505050602060405180830381600087803b151561311b57600080fd5b6102c65a03f1151561312c57600080fd5b50505060405180519050600160a060020a0316145b151561314c57600080fd5b600160a060020a0382166000908152600960205260408120541161316f57600080fd5b50600160a060020a038116600090815260096020526040902054600b8054600191908390811061203857fe5b6000805433600160a060020a039081169116146131b757600080fd5b6007546101009004600160a060020a031663a0e1d694600160006040516020015260405160e060020a63ffffffff84160281526020600482019081528254600260001961010060018416150201909116046024830181905290918291604490910190849080156132685780601f1061323d57610100808354040283529160200191613268565b820191906000526020600020905b81548152906001019060200180831161324b57829003601f168201915b505092505050602060405180830381600087803b151561328757600080fd5b6102c65a03f1151561329857600080fd5b5050506040518051905080156133a35750600754600160a060020a03308116916101009004166335817773600160006040516020015260405160e060020a63ffffffff841602815260206004820190815282546002600019610100600184161502019091160460248301819052909182916044909101908490801561335e5780601f106133335761010080835404028352916020019161335e565b820191906000526020600020905b81548152906001019060200180831161334157829003601f168201915b505092505050602060405180830381600087803b151561337d57600080fd5b6102c65a03f1151561338e57600080fd5b50505060405180519050600160a060020a0316145b15156133ae57600080fd5b50600160a060020a03831660009081526009602052604090205480151561360f57600b8054600160a060020a0386166000908152600960205260409020819055906133fc9060018301614dff565b905060806040519081016040908152600160a060020a038616825260208201859052810183905260016060820152600b80548390811061343857fe5b90600052602060002090600402016000820151815473ffffffffffffffffffffffffffffffffffffffff1916600160a060020a039190911617815560208201518160010190805161348d929160200190614d6f565b50604082015181600201556060820151600391909101805460ff191691151591909117905550600160a060020a0384166000908152600860205260409020829055600b80547f4dcaa4559c4b27f5958620b52cdc8d574d3f5b1749809568f14bafbe6c2118e09183918791908390811061350357fe5b9060005260206000209060040201600101600b8581548110151561352357fe5b906000526020600020906004020160020154600b8681548110151561354457fe5b600091825260209091206003600490920201015460ff16604051858152600160a060020a038516602082015260608101839052811515608082015260a0604082018181528554600260001961010060018416150201909116049183018290529060c0830190869080156135f85780601f106135cd576101008083540402835291602001916135f8565b820191906000526020600020905b8154815290600101906020018083116135db57829003601f168201915b5050965050505050505060405180910390a1612423565b600b80548290811061361d57fe5b600091825260209091206003600490920201015460ff161561363e57600080fd5b6001600b8281548110151561364f57fe5b906000526020600020906004020160030160006101000a81548160ff02191690831515021790555082600b8281548110151561295a57fe5b600b80548290811061369557fe5b60009182526020909120600490910201805460028201546003830154600160a060020a0390921693506001909201919060ff1684565b60005433600160a060020a039081169116146136e657600080fd5b6000805473ffffffffffffffffffffffffffffffffffffffff1916600160a060020a0392909216919091179055565b6000806000613723856149c2565b1561372d57600080fd5b876040518082805190602001908083835b6020831061375d5780518252601f19909201916020918201910161373e565b6001836020036101000a038019825116818451161790925250505091909101925060409150505180910390209250613794836140dc565b915081151561399c577f4ff61b0ba1398d6fcec2382497f16051aad31ee5aa59d5bea3827c5b44ddacb960008960008a8a60086040805190810160405280600f81526020017f436865636b206e6f7420666f756e6400000000000000000000000000000000008152508c604051600160a060020a03891681526040810187905260608101869052608081018590526020810160a0820185600981111561383657fe5b60ff16815260200180602001806020018060200160200185810385528c818151815260200191508051906020019080838360005b8381101561388257808201518382015260200161386a565b50505050905090810190601f1680156138af5780820380516001836020036101000a031916815260200191505b50858103845287818151815260200191508051906020019080838360005b838110156138e55780820151838201526020016138cd565b50505050905090810190601f1680156139125780820380516001836020036101000a031916815260200191505b50858103835286818151815260200191508051906020019080838360005b83811015613948578082015183820152602001613930565b50505050905090810190601f1680156139755780820380516001836020036101000a031916815260200191505b509485039052505060008252506040908101985096505050505050505180910390a1613a6a565b6139a8828888876149d8565b90508015156139d5576139d0826139bf858a6144de565b6139c9868b6146a5565b8b87613b2c565b613a6a565b86600c838154811015156139e557fe5b90600052602060002090600902016002018190555085600c83815481101515613a0a57fe5b906000526020600020906009020160030181905550613a298286613ec0565b613a6a82600460408051908101604052600f81527f4465706f736974656420636865636b000000000000000000000000000000000060208201528b87613b2c565b5050505050505050565b600080836040518082805190602001908083835b60208310613aa75780518252601f199092019160209182019101613a88565b6001836020036101000a038019825116818451161790925250505091909101925060409150505180910390209150613ade826140dc565b9050826009811115613aec57fe5b600c805483908110613afa57fe5b600091825260209091206009918202016004015460ff1690811115613b1b57fe5b14613b2557600080fd5b9250929050565b6007546101009004600160a060020a031663a0e1d694600160006040516020015260405160e060020a63ffffffff8416028152602060048201908152825460026000196101006001841615020190911604602483018190529091829160449091019084908015613bdd5780601f10613bb257610100808354040283529160200191613bdd565b820191906000526020600020905b815481529060010190602001808311613bc057829003601f168201915b505092505050602060405180830381600087803b1515613bfc57600080fd5b6102c65a03f11515613c0d57600080fd5b505050604051805190508015613d185750600754600160a060020a03308116916101009004166335817773600160006040516020015260405160e060020a63ffffffff8416028152602060048201908152825460026000196101006001841615020190911604602483018190529091829160449091019084908015613cd35780601f10613ca857610100808354040283529160200191613cd3565b820191906000526020600020905b815481529060010190602001808311613cb657829003601f168201915b505092505050602060405180830381600087803b1515613cf257600080fd5b6102c65a03f11515613d0357600080fd5b50505060405180519050600160a060020a0316145b1515613d2357600080fd5b83600c86815481101515613d3357fe5b906000526020600020906009020160040160006101000a81548160ff02191690836009811115613d5f57fe5b021790555082600c86815481101515613d7457fe5b9060005260206000209060090201600501908051613d96929160200190614d6f565b507f4ff61b0ba1398d6fcec2382497f16051aad31ee5aa59d5bea3827c5b44ddacb9600c86815481101515613dc757fe5b6000918252602090912060099091020154600c8054600160a060020a0390921691859185918a908110613df657fe5b906000526020600020906009020160020154600c8a815481101515613e1757fe5b906000526020600020906009020160030154600c8b815481101515613e3857fe5b6000918252602090912060046009909202010154600c805460ff909216918d908110613e6057fe5b9060005260206000209060090201600501600c8d815481101515613e8057fe5b9060005260206000209060090201600601600c8e815481101515613ea057fe5b9060005260206000209060090201600701600c8f81548110151561153f57fe5b613ec9816149c2565b15156140d85780600c83815481101515613edf57fe5b9060005260206000209060090201600601908051613f01929160200190614d6f565b50613f0b81614b10565b15156140d857600754600054600c8054600160a060020a03610100909404841693637aea878f9316919086908110613f3f57fe5b9060005260206000209060090201600101600c86815481101515613f5f57fe5b90600052602060002090600902016006014260006040516020015260405160e060020a63ffffffff8716028152600160a060020a03851660048201908152606482018390526080602483019081528554600260001961010060018416150201909116046084840181905291929091604482019160a40190879080156140255780601f10613ffa57610100808354040283529160200191614025565b820191906000526020600020905b81548152906001019060200180831161400857829003601f168201915b50508381038252855460026000196101006001841615020190911604808252602090910190869080156140995780601f1061406e57610100808354040283529160200191614099565b820191906000526020600020905b81548152906001019060200180831161407c57829003601f168201915b50509650505050505050602060405180830381600087803b15156140bc57600080fd5b6102c65a03f115156140cd57600080fd5b505050604051805150505b5050565b6000818152600a602052604081205415156140f95750600061410a565b506000818152600a60205260409020545b919050565b6007546000906101009004600160a060020a031663a0e1d6946001836040516020015260405160e060020a63ffffffff84160281526020600482019081528254600260001961010060018416150201909116046024830181905290918291604490910190849080156141c25780601f10614197576101008083540402835291602001916141c2565b820191906000526020600020905b8154815290600101906020018083116141a557829003601f168201915b505092505050602060405180830381600087803b15156141e157600080fd5b6102c65a03f115156141f257600080fd5b5050506040518051905080156142fd5750600754600160a060020a03308116916101009004166335817773600160006040516020015260405160e060020a63ffffffff84160281526020600482019081528254600260001961010060018416150201909116046024830181905290918291604490910190849080156142b85780601f1061428d576101008083540402835291602001916142b8565b820191906000526020600020905b81548152906001019060200180831161429b57829003601f168201915b505092505050602060405180830381600087803b15156142d757600080fd5b6102c65a03f115156142e857600080fd5b50505060405180519050600160a060020a0316145b151561430857600080fd5b600160a060020a0384166000908152600960205260408120541180156143695750600160a060020a038416600090815260096020526040902054600b8054909190811061435157fe5b600091825260209091206003600490920201015460ff165b151561437457600080fd5b600160a060020a0383166000908152600960205260408120541180156143d55750600160a060020a038316600090815260096020526040902054600b805490919081106143bd57fe5b600091825260209091206003600490920201015460ff165b15156143e057600080fd5b600160a060020a0384166000908152600860205260409020548290108015906144235750600160a060020a03831660009081526008602052604090205482810110155b151561442e57600080fd5b600160a060020a0380851660008181526008602052604080822080548790038155938716825281208054860190555254614469908590614c0f565b600160a060020a03831660009081526008602052604090205461448d908490614c0f565b82600160a060020a031684600160a060020a03167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef8460405190815260200160405180910390a35060019392505050565b6000806144ea846140dc565b90508015156144fc5760089150611c6c565b600c80548290811061450a57fe5b6000918252602090912060046009909202010154600c805460ff9092169350614553918390811061453757fe5b600091825260209091206004600990920201015460ff16614c53565b1561455d57600891505b6145678184614c7f565b1561457157600891505b61457b8184614cc8565b15611c6c575060089392505050565b6000805433600160a060020a039081169116141561463c576145ab826149c2565b806146345750816040518082805190602001908083835b602083106145e15780518252601f1990920191602091820191016145c2565b6001836020036101000a0380198251168184511617909252505050919091019250604091505051908190039020600c80548590811061461c57fe5b90600052602060002090600902016008015460001916145b15905061469f565b600c8054600091908590811061464e57fe5b906000526020600020906009020160080154600019161415801561469c575081604051808280519060200190808383602083106145e15780518252601f1990920191602091820191016145c2565b90505b92915050565b6146ad614ded565b60006146b8846140dc565b90508015156146fc5760408051908101604052600f81527f436865636b206e6f7420666f756e64000000000000000000000000000000000060208201529150611c6c565b600c80548290811061470a57fe5b90600052602060002090600902016005018054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156147af5780601f10614784576101008083540402835291602001916147af565b820191906000526020600020905b81548152906001019060200180831161479257829003601f168201915b505050505091506147e4600c828154811015156147c857fe5b600091825260209091206004600990920201015460ff16614d2b565b156148205760408051908101604052601281527f4e6f7420416363657074656420636865636b0000000000000000000000000000602082015291505b614832600c8281548110151561453757fe5b1561486e5760408051908101604052601781527f436865636b20616c72656164792070726f636573736564000000000000000000602082015291505b6148788184614c7f565b156148b45760408051908101604052600d81527f426f756e63656420636865636b00000000000000000000000000000000000000602082015291505b6148be8184614cc8565b15611c6c5760408051908101604052601b81527f436865636b207769746820696e636f727265637420616d6f756e7400000000006020820152949350505050565b6000805433600160a060020a03908116911614801561469c575060075460ff168061469c57506004600c80548590811061493557fe5b600091825260209091206009918202016004015460ff169081111561495657fe5b148061499057506005600c80548590811061496d57fe5b600091825260209091206009918202016004015460ff169081111561498e57fe5b145b801561469c575060068260098111156149a557fe5b148061469c575060088260098111156149ba57fe5b149392505050565b60006149cc614ded565b50818051159392505050565b600082600c868154811015156149ea57fe5b9060005260206000209060090201600301541115614a0a575060006119fa565b614a14858361458a565b15614a21575060006119fa565b6009600c805487908110614a3157fe5b600091825260209091206009918202016004015460ff1690811115614a5257fe5b1480614a8c57506008600c805487908110614a6957fe5b600091825260209091206009918202016004015460ff1690811115614a8a57fe5b145b15614a99575060006119fa565b614aab600c8681548110151561453757fe5b15614ab8575060006119fa565b614aca600c868154811015156147c857fe5b15614ad7575060006119fa565b614ae18585614c7f565b15614aee575060006119fa565b614af88585614cc8565b15614b05575060006119fa565b506001949350505050565b6000614b1a614ded565b508160005b60065460026000196101006001841615020190911604811015614c0557600254829060ff16820181518110614b5057fe5b016020015160f860020a900460f860020a027effffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff19166006828154600181600116156101000203166002900481101515614ba457fe5b815460011615614bc35790600052602060002090602091828204019190065b9054901a60f860020a027fff000000000000000000000000000000000000000000000000000000000000001614614bfd57600092506119cc565b600101614b1f565b5060019392505050565b600160a060020a038216600090815260096020526040902054600b805483919083908110614c3957fe5b906000526020600020906004020160020181905550505050565b60006004826009811115614c6357fe5b148061469f57506006826009811115614c7857fe5b1492915050565b60008160086000600c86815481101515614c9557fe5b60009182526020808320600990920290910154600160a060020a0316835282019290925260400190205410905092915050565b60008115801590614cf95750600c805484908110614ce257fe5b906000526020600020906009020160020154600014155b801561469c5750600c805484908110614d0e57fe5b906000526020600020906009020160020154821415905092915050565b60006003826009811115614d3b57fe5b141592915050565b815481835581811511612d8e57600902816009028360005260206000209182019101612d8e9190614e2b565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f10614db057805160ff1916838001178555614ddd565b82800160010185558215614ddd579182015b82811115614ddd578251825591602001919060010190614dc2565b50614de9929150614ebc565b5090565b60206040519081016040526000815290565b815481835581811511612d8e57600402816004028360005260206000209182019101612d8e9190614ed6565b614eb991905b80821115614de957805473ffffffffffffffffffffffffffffffffffffffff191681556000614e636001830182614f2a565b6000600283018190556003830181905560048301805460ff19169055614e8d906005840190614f2a565b614e9b600683016000614f2a565b614ea9600783016000614f2a565b5060006008820155600901614e31565b90565b614eb991905b80821115614de95760008155600101614ec2565b614eb991905b80821115614de957805473ffffffffffffffffffffffffffffffffffffffff191681556000614f0e6001830182614f2a565b506000600282015560038101805460ff19169055600401614edc565b50805460018160011615610100020316600290046000825580601f10614f505750614f6e565b601f016020900490600052602060002090810190614f6e9190614ebc565b505600a165627a7a7230582070a79052f741cc3242fc3e8ad466cd40426c8b62ecdf11f70b5211a23c122aea0029',
		gas: deployGas
	}, function (e, contract) {
		console.log(e, contract);
		if (typeof contract.address !== 'undefined') {
			console.log('Blockcheq contract mined! address: "' + contract.address + '"\n');
			callBack(contract);
		} else {
			console.log('Waiting for BlockCheq\n');
			waitBlock(contract.transactionHash, function(){callBack(contract);})
		}
	});
}

var deployBlockBank = function(callBack) {
	blockbankContract.new("Regulator", 0, 3, {
		from: regulator,
		data: '0x606060405234156200001057600080fd5b60405162002b8e38038062002b8e833981016040528080518201919060200180519190602001805160008054600160a060020a03191633600160a060020a03161790559150600190508380516200006c9291602001906200007d565b506002919091556003555062000122565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f10620000c057805160ff1916838001178555620000f0565b82800160010185558215620000f0579182015b82811115620000f0578251825591602001919060010190620000d3565b50620000fe92915062000102565b5090565b6200011f91905b80821115620000fe576000815560010162000109565b90565b612a5c80620001326000396000f30060606040526004361061020e5763ffffffff7c010000000000000000000000000000000000000000000000000000000060003504166306fdde0381146102205780631310b693146102aa57806313b73601146102d45780631617d45614610339578063185cba1c1461034c5780631b3ebe3b14610362578063218459f91461037557806322de3c911461038e57806335817773146103a15780633e3c48de1461040e5780633e76de53146104b35780634518f6b3146105125780634eec724f14610563578063545a2138146105b457806362d30ae0146106075780636932cf811461065c5780636933a44c146106ad57806373366bce146106c357806379d1c146146106d95780637aea878f146106ef5780637e105ce21461079257806384b25969146107b15780638e2cd8ad146107c4578063902fb4e0146107dd57806396f7edae14610830578063a0e1d69414610849578063a363ea961461089a578063a691ab40146108ed578063af987f3114610906578063b96a641e1461091c578063b9a5dbf314610932578063bd5981ae14610948578063bf68134014610999578063c3b95b1b146109ec578063dd8fee1414610a02578063df2043b614610a15578063e3298c9f14610aa8578063e8b5a5a614610afd578063f03590bf14610b59578063f14d027714610b6f578063f7dcd27e14610b88578063f7e317f414610bd9578063f94f9d0e14610bec575b341561021957600080fd5b600080fd5b005b341561022b57600080fd5b610233610c48565b60405160208082528190810183818151815260200191508051906020019080838360005b8381101561026f578082015183820152602001610257565b50505050905090810190601f16801561029c5780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b34156102b557600080fd5b6102c0600435610ce6565b604051901515815260200160405180910390f35b34156102df57600080fd5b61032760046024813581810190830135806020601f820181900481020160405190810160405281815292919060208401838380828437509496505093359350610d0592505050565b60405190815260200160405180910390f35b341561034457600080fd5b610327610d78565b341561035757600080fd5b610327600435610d7e565b341561036d57600080fd5b610327610d90565b341561038057600080fd5b610327600435602435610d97565b341561039957600080fd5b610327610df7565b34156103ac57600080fd5b6103f260046024813581810190830135806020601f82018190048102016040519081016040528181529291906020840183838082843750949650610e1a95505050505050565b604051600160a060020a03909116815260200160405180910390f35b341561041957600080fd5b61032760046024813581810190830135806020601f8201819004810201604051908101604052818152929190602084018383808284378201915050505050509190803590602001908201803590602001908080601f01602080910402602001604051908101604052818152929190602084018383808284375094965050600160a060020a03853581169560200135169350610e8b92505050565b34156104be57600080fd5b61021e60048035600160a060020a03169060446024803590810190830135806020601f8201819004810201604051908101604052818152929190602084018383808284375094965061120f95505050505050565b341561051d57600080fd5b6103f260046024813581810190830135806020601f8201819004810201604051908101604052818152929190602084018383808284375094965061125d95505050505050565b341561056e57600080fd5b61032760046024813581810190830135806020601f820181900481020160405190810160405281815292919060208401838380828437509496506112c795505050505050565b34156105bf57600080fd5b6103f260046024813581810190830135806020601f82018190048102016040519081016040528181529291906020840183838082843750949650509335935061133192505050565b341561061257600080fd5b61021e60046024813581810190830135806020601f8201819004810201604051908101604052818152929190602084018383808284375094965050505091351515915061139c9050565b341561066757600080fd5b61023360046024813581810190830135806020601f820181900481020160405190810160405281815292919060208401838380828437509496506115d795505050505050565b34156106b857600080fd5b6103f2600435611648565b34156106ce57600080fd5b6102c0600435611666565b34156106e457600080fd5b610327600435611685565b34156106fa57600080fd5b61032760048035600160a060020a03169060446024803590810190830135806020601f8201819004810201604051908101604052818152929190602084018383808284378201915050505050509190803590602001908201803590602001908080601f01602080910402602001604051908101604052818152929190602084018383808284375094965050933593506116ab92505050565b341561079d57600080fd5b610233600160a060020a0360043516611a5f565b34156107bc57600080fd5b610327611a89565b34156107cf57600080fd5b6102c0600435602435611a8f565b34156107e857600080fd5b61032760046024813581810190830135806020601f820181900481020160405190810160405281815292919060208401838380828437509496505093359350611af392505050565b341561083b57600080fd5b610233600435602435611b5e565b341561085457600080fd5b6102c060046024813581810190830135806020601f82018190048102016040519081016040528181529291906020840183838082843750949650611c7d95505050505050565b34156108a557600080fd5b61023360046024813581810190830135806020601f820181900481020160405190810160405281815292919060208401838380828437509496505093359350611ce792505050565b34156108f857600080fd5b610327600435602435611d59565b341561091157600080fd5b610233600435611db9565b341561092757600080fd5b6103f2600435611e7f565b341561093d57600080fd5b610327600435611e9d565b341561095357600080fd5b61032760046024813581810190830135806020601f82018190048102016040519081016040528181529291906020840183838082843750949650611eda95505050505050565b34156109a457600080fd5b6102c060046024813581810190830135806020601f820181900481020160405190810160405281815292919060208401838380828437509496505093359350611f4492505050565b34156109f757600080fd5b610327600435611faf565b3415610a0d57600080fd5b6103f2611fc0565b3415610a2057600080fd5b61021e60046024813581810190830135806020601f8201819004810201604051908101604052818152929190602084018383808284378201915050505050509190803590602001908201803590602001908080601f016020809104026020016040519081016040528181529291906020840183838082843750949650611fcf95505050505050565b3415610ab357600080fd5b61021e60046024813581810190830135806020601f820181900481020160405190810160405281815292919060208401838380828437509496505050509135151591506121729050565b3415610b0857600080fd5b61021e60046024813581810190830135806020601f8201819004810201604051908101604052818152929190602084018383808284375094965050509235600160a060020a0316925061231b915050565b3415610b6457600080fd5b6102336004356124d2565b3415610b7a57600080fd5b6103f2600435602435612561565b3415610b9357600080fd5b6102c060046024813581810190830135806020601f820181900481020160405190810160405281815292919060208401838380828437509496506125cb95505050505050565b3415610be457600080fd5b6103f2612635565b3415610bf757600080fd5b61021e60046024813581810190830135806020601f8201819004810201604051908101604052818152929190602084018383808284375094965050509235600160a060020a03169250612644915050565b60018054600181600116156101000203166002900480601f016020809104026020016040519081016040528092919081815260200182805460018160011615610100020316600290048015610cde5780601f10610cb357610100808354040283529160200191610cde565b820191906000526020600020905b815481529060010190602001808311610cc157829003601f168201915b505050505081565b60009081526006602052604090206004015460a060020a900460ff1690565b600080836040518082805190602001908083835b60208310610d385780518252601f199092019160209182019101610d19565b6001836020036101000a038019825116818451161790925250505091909101925060409150505180910390209050610d708184610d97565b949350505050565b60025481565b60009081526006602052604090205490565b6004545b90565b60008281526008602052604081205481811515610db357600080fd5b50600081815260096020908152604080832087845290915290208054819085908110610ddb57fe5b9060005260206000209060050201600201549250505092915050565b6000805433600160a060020a03908116911614610e1357600080fd5b5060055490565b600080826040518082805190602001908083835b60208310610e4d5780518252601f199092019160209182019101610e2e565b6001836020036101000a038019825116818451161790925250505091909101925060409150505180910390209050610e8481611648565b9392505050565b60008054819033600160a060020a03908116911614610ea957600080fd5b856040518082805190602001908083835b60208310610ed95780518252601f199092019160209182019101610eba565b6001836020036101000a038019825116818451161790925250505091909101925060409150505190819003902060008181526006602052604090206004015490915060a860020a900460ff1615610f2f57600080fd5b6000818152600660205260409020600201858051610f519291602001906128d1565b506000818152600660205260409020600381018054600160a060020a03808816600160a060020a03199283161790925560048301805475ff0000000000000000000000000000000000000000001974ff00000000000000000000000000000000000000001994891691909316179290921660a060020a171660a860020a17905560019081015460029181161561010002600019011604151561102f57600160048054806001018281611003919061294f565b600092835260208084209290920185905584835260069091526040909120919003908190559150611041565b60008181526006602052604090205491505b60008181526006602052604090206001018680516110639291602001906128d1565b50600160a060020a038085166000908152600760209081526040808320859055848352600690915290819020805460038201546004830154600080516020612a118339815191529592946001850194600201939283169282169160ff60a060020a820481169260a860020a909204169051878152600160a060020a0385811660608301528416608082015282151560a082015281151560c082015260e0602082018181528854600260018216156101009081026000190190921604928401839052909160408401918401908a90801561117d5780601f106111525761010080835404028352916020019161117d565b820191906000526020600020905b81548152906001019060200180831161116057829003601f168201915b50508381038252885460026000196101006001841615020190911604808252602090910190899080156111f15780601f106111c6576101008083540402835291602001916111f1565b820191906000526020600020905b8154815290600101906020018083116111d457829003601f168201915b5050995050505050505050505060405180910390a150949350505050565b60005433600160a060020a0390811691161461122a57600080fd5b60008054600160a060020a031916600160a060020a03841617905560018180516112589291602001906128d1565b505050565b600080826040518082805190602001908083835b602083106112905780518252601f199092019160209182019101611271565b6001836020036101000a038019825116818451161790925250505091909101925060409150505180910390209050610e8481611e7f565b600080826040518082805190602001908083835b602083106112fa5780518252601f1990920191602091820191016112db565b6001836020036101000a038019825116818451161790925250505091909101925060409150505180910390209050610e8481611685565b600080836040518082805190602001908083835b602083106113645780518252601f199092019160209182019101611345565b6001836020036101000a038019825116818451161790925250505091909101925060409150505180910390209050610d708184612561565b6000805433600160a060020a039081169116146113b857600080fd5b826040518082805190602001908083835b602083106113e85780518252601f1990920191602091820191016113c9565b6001836020036101000a03801982511681845116179092525050509190910192506040915050519081900390206000818152600660205260409081902060048101805475ff000000000000000000000000000000000000000000191660a860020a8715158102919091179182905582546003840154959650600080516020612a11833981519152959094600185019460020193600160a060020a03928316939281169260ff60a060020a8304811693919092049091169051878152600160a060020a0385811660608301528416608082015282151560a082015281151560c082015260e0602082018181528854600260018216156101009081026000190190921604928401839052909160408401918401908a9080156115495780601f1061151e57610100808354040283529160200191611549565b820191906000526020600020905b81548152906001019060200180831161152c57829003601f168201915b50508381038252885460026000196101006001841615020190911604808252602090910190899080156115bd5780601f10611592576101008083540402835291602001916115bd565b820191906000526020600020905b8154815290600101906020018083116115a057829003601f168201915b5050995050505050505050505060405180910390a1505050565b6115df612973565b6000826040518082805190602001908083835b602083106116115780518252601f1990920191602091820191016115f2565b6001836020036101000a038019825116818451161790925250505091909101925060409150505180910390209050610e84816124d2565b600090815260066020526040902060040154600160a060020a031690565b60009081526006602052604090206004015460a860020a900460ff1690565b600081815260086020908152604080832054835260098252808320938352929052205490565b600160a060020a038416600090815260076020908152604080832054808452600690925282206004810154839081908190819060a860020a900460ff1615156116f357600080fd5b600485015460a060020a900460ff16151561170d57600080fd5b600385015433600160a060020a039081169116148061173c5750600485015433600160a060020a039081169116145b151561174757600080fd5b611756896002546003546127dc565b6040518082805190602001908083835b602083106117855780518252601f199092019160209182019101611766565b6001836020036101000a038019825116818451161790925250505091909101925060409150505190819003902060008181526006602052604090206004810154919550935060a860020a900460ff1680156117eb5750600483015460a060020a900460ff165b15156117f657600080fd5b896040518082805190602001908083835b602083106118265780518252601f199092019160209182019101611807565b6001836020036101000a038019825116818451161790925250505091909101925060409150505180910390209150886040518082805190602001908083835b602083106118845780518252601f199092019160209182019101611865565b6001836020036101000a03801982511681845116179092525050509190910192506040915050519081900390206000858152600960209081526040808320848452909152902054909150151561190757600081815260086020526040902084905560058054600181016118f7838261294f565b5060009182526020909120018190555b600084815260096020908152604080832084845290915290208054600181016119308382612985565b9160005260206000209060050201600060a060405190810160409081528a825260048a0154600160a060020a031660208301528101869052606081018c905260016080820152919050815181556020820151600182018054600160a060020a031916600160a060020a0392909216919091179055604082015160028201556060820151816003015560808201516004918201805460ff19169115159190911790558701549198507fce1d2f3e5cd2ee1c633a46856244e679f18877d220a03a1d89e52b07c1cedab6918991508890600160a060020a0316858c60016040519586526020860194909452600160a060020a039092166040808601919091526060850191909152608084019190915290151560a083015260c0909101905180910390a1505050505050949350505050565b611a67612973565b600160a060020a038216600090815260076020526040902054610e8481611db9565b60035481565b60008281526008602052604081205481811515611aab57600080fd5b50600081815260096020908152604080832087845290915290208054819085908110611ad357fe5b600091825260209091206005909102016004015460ff1695945050505050565b600080836040518082805190602001908083835b60208310611b265780518252601f199092019160209182019101611b07565b6001836020036101000a038019825116818451161790925250505091909101925060409150505180910390209050610d708184611d59565b611b66612973565b60008381526008602052604081205490811515611b8257600080fd5b506000818152600960209081526040808320878452909152812080549091600691839087908110611baf57fe5b906000526020600020906005020160000154600019166000191681526020019081526020016000206001018054600181600116156101000203166002900480601f016020809104026020016040519081016040528092919081815260200182805460018160011615610100020316600290048015611c6e5780601f10611c4357610100808354040283529160200191611c6e565b820191906000526020600020905b815481529060010190602001808311611c5157829003601f168201915b50505050509250505092915050565b600080826040518082805190602001908083835b60208310611cb05780518252601f199092019160209182019101611c91565b6001836020036101000a038019825116818451161790925250505091909101925060409150505180910390209050610e8481610ce6565b611cef612973565b6000836040518082805190602001908083835b60208310611d215780518252601f199092019160209182019101611d02565b6001836020036101000a038019825116818451161790925250505091909101925060409150505180910390209050610d708184611b5e565b60008281526008602052604081205481811515611d7557600080fd5b50600081815260096020908152604080832087845290915290208054819085908110611d9d57fe5b9060005260206000209060050201600301549250505092915050565b611dc1612973565b6006600083600019166000191681526020019081526020016000206001018054600181600116156101000203166002900480601f016020809104026020016040519081016040528092919081815260200182805460018160011615610100020316600290048015611e735780601f10611e4857610100808354040283529160200191611e73565b820191906000526020600020905b815481529060010190602001808311611e5657829003601f168201915b50505050509050919050565b600090815260066020526040902060030154600160a060020a031690565b6000805433600160a060020a03908116911614611eb957600080fd5b6005805483908110611ec757fe5b9060005260206000209001549050919050565b600080826040518082805190602001908083835b60208310611f0d5780518252601f199092019160209182019101611eee565b6001836020036101000a038019825116818451161790925250505091909101925060409150505180910390209050610e8481610d7e565b600080836040518082805190602001908083835b60208310611f775780518252601f199092019160209182019101611f58565b6001836020036101000a038019825116818451161790925250505091909101925060409150505180910390209050610d708184611a8f565b6000600482815481101515611ec757fe5b600054600160a060020a031681565b6000805433600160a060020a03908116911614611feb57600080fd5b826040518082805190602001908083835b6020831061201b5780518252601f199092019160209182019101611ffc565b6001836020036101000a038019825116818451161790925250505091909101925060409150505190819003902060008181526006602052604090206004015490915060a860020a900460ff16151561207257600080fd5b60008181526006602052604090206002018280516120949291602001906128d1565b5060008181526006602052604090819020805460038201546004830154600080516020612a118339815191529492936001810193600290910192600160a060020a03908116929081169160ff60a060020a830481169260a860020a9004169051878152600160a060020a0385811660608301528416608082015282151560a082015281151560c082015260e0602082018181528854600260018216156101009081026000190190921604928401839052909160408401918401908a9080156115495780601f1061151e57610100808354040283529160200191611549565b6000805433600160a060020a0390811691161461218e57600080fd5b826040518082805190602001908083835b602083106121be5780518252601f19909201916020918201910161219f565b6001836020036101000a038019825116818451161790925250505091909101925060409150505190819003902060008181526006602052604090206004015490915060a860020a900460ff16151561221557600080fd5b6000818152600660205260409081902060048101805474ff0000000000000000000000000000000000000000191660a060020a8615158102919091179182905582546003840154600080516020612a118339815191529591946001810194600290910193600160a060020a03928316939282169260ff91830482169260a860020a90049091169051878152600160a060020a0385811660608301528416608082015282151560a082015281151560c082015260e0602082018181528854600260018216156101009081026000190190921604928401839052909160408401918401908a9080156115495780601f1061151e57610100808354040283529160200191611549565b6000805433600160a060020a0390811691161461233757600080fd5b826040518082805190602001908083835b602083106123675780518252601f199092019160209182019101612348565b6001836020036101000a038019825116818451161790925250505091909101925060409150505190819003902060008181526006602052604090206004015490915060a860020a900460ff1615156123be57600080fd5b6000818152600660208181526040808420600481018054600160a060020a039081168752600785528387208790558154600160a060020a03191689821617808355811687528387208890559587905293909252815460038301549354600080516020612a118339815191529591946001850194600201939083169282169160a060020a810460ff9081169260a860020a909204169051878152600160a060020a0385811660608301528416608082015282151560a082015281151560c082015260e0602082018181528854600260018216156101009081026000190190921604928401839052909160408401918401908a9080156115495780601f1061151e57610100808354040283529160200191611549565b6124da612973565b6006600083600019166000191681526020019081526020016000206002018054600181600116156101000203166002900480601f016020809104026020016040519081016040528092919081815260200182805460018160011615610100020316600290048015611e735780601f10611e4857610100808354040283529160200191611e73565b6000828152600860205260408120548181151561257d57600080fd5b506000818152600960209081526040808320878452909152902080548190859081106125a557fe5b6000918252602090912060059091020160010154600160a060020a031695945050505050565b600080826040518082805190602001908083835b602083106125fe5780518252601f1990920191602091820191016125df565b6001836020036101000a038019825116818451161790925250505091909101925060409150505180910390209050610e8481611666565b600054600160a060020a031690565b6000805433600160a060020a0390811691161461266057600080fd5b826040518082805190602001908083835b602083106126905780518252601f199092019160209182019101612671565b6001836020036101000a038019825116818451161790925250505091909101925060409150505190819003902060008181526006602052604090206004015490915060a860020a900460ff1615156126e757600080fd5b60008181526006602052604090819020600381018054600160a060020a031916600160a060020a03868116919091179182905582546004840154600080516020612a118339815191529591946001810194600290910193908116929082169160a060020a810460ff9081169260a860020a909204169051878152600160a060020a0385811660608301528416608082015282151560a082015281151560c082015260e0602082018181528854600260018216156101009081026000190190921604928401839052909160408401918401908a9080156115495780601f1061151e57610100808354040283529160200191611549565b6127e4612973565b6127ec612973565b6127f4612973565b6000869250846040518059106128075750595b818152601f19601f830116810160200160405290509150600090505b848110156128c757828187018151811061283957fe5b01602001517f010000000000000000000000000000000000000000000000000000000000000090047f01000000000000000000000000000000000000000000000000000000000000000282828151811061288f57fe5b9060200101907effffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916908160001a905350600101612823565b5095945050505050565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f1061291257805160ff191683800117855561293f565b8280016001018555821561293f579182015b8281111561293f578251825591602001919060010190612924565b5061294b9291506129b1565b5090565b815481835581811511611258576000838152602090206112589181019083016129b1565b60206040519081016040526000815290565b8154818355818115116112585760050281600502836000526020600020918201910161125891906129cb565b610d9491905b8082111561294b57600081556001016129b7565b610d9491905b8082111561294b576000808255600182018054600160a060020a031916905560028201819055600382015560048101805460ff191690556005016129d15600c12c629deecc6b3b3afacaf99b9f75e9efc5a853209d9d004e52bdc07365816fa165627a7a72305820b79f92c7554f9ed126dc918fad9b0e748614b546cc9f5aa242d053fb11f993190029',
		gas: deployGas
	}, function (e, contract) {
		console.log(e, contract);
		if (typeof contract.address !== 'undefined') {
			console.log('Blockbank contract mined! address: "' + contract.address + '"\n');
			callBack(contract);
		} else {
			console.log('Waiting for Blockbank\n');
			waitBlock(contract.transactionHash, function(){callBack(contract);})
		}
	});
}

var addBanksAccountCheqs = function(blockBank, blockCheq1, blockCheq2){
	blockBank.addBank(bank1Code, bank1Name, bank1, blockCheq1.address, {from:regulator,gas:transGas});
	blockBank.addBank(bank2Code, bank2Name, bank2, blockCheq2.address, {from:regulator,gas:transGas});
	console.log("Banks added ");
	
	// add accounts
	blockCheq1.addAccount(user1Addr, bank1Code+"98765432M", 300000000000, {from:bank1,gas:transGas});
	blockCheq1.addAccount(user2Addr, bank1Code+"65013465D", 300000000000, {from:bank1,gas:transGas});
	blockCheq2.addAccount(user2Addr, bank2Code+"23456789D", 300000000000, {from:bank2,gas:transGas});
	console.log("Accounts added ");

	// add checks
	blockCheq1.addCheck(user1Addr, "-35300582- 0187705345d 100151410503c",  {from:bank1,gas:transGas});
	blockCheq1.addCheck(user1Addr, "-00803918- 0010002165d 601105549800c",  {from:bank1,gas:transGas});
	blockCheq1.addCheck(user1Addr, "-35300506- 0183602415d 800011455987c",  {from:bank1,gas:transGas});
	blockCheq1.addCheck(user2Addr, "-35300262-0180006925d800800791139c",  {from:bank1,gas:transGas});
	blockCheq1.addCheck(user2Addr, "-00803914- 0010001375d 602948659921c",  {from:bank1,gas:transGas});
	blockCheq2.addCheck(user2Addr, "-35300582- 0187705345d 100151410555c",  {from:bank2,gas:transGas});
	blockCheq2.addCheck(user2Addr, "8955 511150143 51451000617 0000111",  {from:bank2,gas:transGas});
	blockCheq2.addCheck(user2Addr, "0000078 0270320 00003233070 01",  {from:bank2,gas:transGas});
	blockCheq2.addCheck(user2Addr, "7907 516800029 01477880149 0000023",  {from:bank2,gas:transGas});
	console.log("Checks added ");

	// print info
	console.log("----------------------- CONTRACTS ----------------------");
	console.log("Blockbank deployed at " + blockBank.address);
	console.log("First BlockCheck deployed at " + blockCheq1.address);
	console.log("Second BlockCheck deployed at " + blockCheq2.address);
	console.log("----------------------- ACCOUNTS -----------------------");
	console.log('regulator: ' + regulator);
	console.log('bank 1: ' + bank1);
	console.log('bank 2: ' + bank2);
	console.log('user 1: ' + user1Addr);
	console.log('user 2: ' + user2Addr);
	
}

function waitBlock(transhash, callback) {
  function innerWaitBlock() {
    var receipt = web3.eth.getTransactionReceipt(transhash);
    if (receipt && receipt.contractAddress) {
	  callback();
    } else {
      console.log("Waiting a mined block to include your contract... currently in block " + web3.eth.blockNumber);
      setTimeout(innerWaitBlock, 2000);
    }
  }
}

console.log('Calling contract creation');
deployBlockBank(function(blockBank){
	console.log('BlockBank ready, calling Blockcheq');
	deployBlockCheq(bank1Code, bank1Name, blockBank.address, true, bank1, function(blockCheq1) {
		console.log('Blockcheq ready, calling Blockcheq');
		deployBlockCheq(bank2Code, bank2Name, blockBank.address, false, bank2, function(blockCheq2) {
			console.log('Blockcheq ready, calling config');
			addBanksAccountCheqs(blockBank, blockCheq1, blockCheq2);
		});
	});
});

