/////////////////////////////////////////
// Auto generated code. Do not modify! //
/////////////////////////////////////////

var RailwaySecurityCompiled = {"abi":[{"constant":false,"inputs":[{"name":"staffId","type":"string"},{"name":"index","type":"uint256"},{"name":"status","type":"uint8"}],"name":"setCourseStatus","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"staffId","type":"string"},{"name":"revisionDate","type":"uint256"}],"name":"addStaffRevisionDate","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"staffId","type":"string"},{"name":"index","type":"uint256"},{"name":"action","type":"uint8"},{"name":"hash","type":"string"}],"name":"registerCourse","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"staffAddress","type":"address"}],"name":"setStaffContract","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"_owner","type":"address"}],"name":"transferOwner","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"staffId","type":"string"},{"name":"index","type":"uint256"},{"name":"reference","type":"string"},{"name":"center","type":"string"},{"name":"renewalDate","type":"uint256"}],"name":"updateCourse","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"staffId","type":"string"}],"name":"staffRevisionDateCount","outputs":[{"name":"count","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"courseAddress","type":"address"}],"name":"setCourseContract","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"staffId","type":"string"},{"name":"index","type":"uint256"}],"name":"getCourseStatus","outputs":[{"name":"","type":"uint8"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"getOwner","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"isOwner","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"staffId","type":"string"},{"name":"category","type":"uint8"}],"name":"updateStaff","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"staffId","type":"string"},{"name":"index","type":"uint256"}],"name":"getCourseReference","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"staffId","type":"string"},{"name":"category","type":"uint8"}],"name":"addStaff","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"staffId","type":"string"}],"name":"getStaff","outputs":[{"name":"category","type":"uint8"},{"name":"staffStatus","type":"uint8"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"staffId","type":"string"},{"name":"index","type":"uint256"},{"name":"status","type":"uint8"}],"name":"getCourseInfo","outputs":[{"name":"date","type":"uint256"},{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"staffId","type":"string"},{"name":"index","type":"uint256"}],"name":"getCourseTrainingCenter","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"staffId","type":"string"},{"name":"index","type":"uint256"}],"name":"getStaffRevisionDate","outputs":[{"name":"staffRevisionDate","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"staffId","type":"string"},{"name":"index","type":"uint256"}],"name":"getCourseRenewalDate","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"staffId","type":"string"},{"name":"index","type":"uint256"}],"name":"getCourseId","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"RENEWAL_IDX","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"staffId","type":"string"},{"name":"status","type":"uint8"}],"name":"setStaffStatus","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"staffId","type":"string"}],"name":"courseCount","outputs":[{"name":"count","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"staffId","type":"string"},{"name":"index","type":"uint256"}],"name":"getCourseTitleId","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"staffId","type":"string"},{"name":"courseId","type":"string"},{"name":"reference","type":"string"},{"name":"titleId","type":"string"},{"name":"center","type":"string"},{"name":"creationHash","type":"string"}],"name":"addCourse","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"staffId","type":"string"}],"name":"deleteStaff","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"}],"bytecode":"0x606060405260008054600160a060020a033316600160a060020a03199091161790556122cd806100306000396000f30060606040526004361061013a5763ffffffff60e060020a6000350416630d1ded90811461013f5780632778e5261461019c57806331da60f7146101ef5780633771416a1461028e5780634fb2e45d146102ad578063592e717a146102cc5780635a9c8b31146103ac5780635d3db9801461040f57806385e9e3e61461042e578063893d20e8146104a55780638f32d59b146104d4578063987360cf146104fb5780639d78c14a14610551578063a0921b3d1461061b578063a1258f3e14610671578063ab7b1cdf146106fb578063b9694e92146107d4578063bb7d4f7f14610827578063be2e535b1461087a578063c7755fad146108cd578063d4d4885b14610920578063d53fcd0d14610933578063e3dea46a14610989578063e99796ff146109da578063ece8a29d14610a2d578063f64c735f14610bc8575b600080fd5b341561014a57600080fd5b61019a60046024813581810190830135806020601f82018190048102016040519081016040528181529291906020840183838082843750949650508435946020013560ff169350610c1992505050565b005b34156101a757600080fd5b61019a60046024813581810190830135806020601f820181900481020160405190810160405281815292919060208401838380828437509496505093359350610cff92505050565b34156101fa57600080fd5b61019a60046024813581810190830135806020601f82018190048102016040519081016040528181529291906020840183838082843750949686359660208082013560ff169750919550606081019450604090810135860180830194503592508291601f830181900481020190519081016040528181529291906020840183838082843750949650610dc895505050505050565b341561029957600080fd5b61019a600160a060020a0360043516610ec6565b34156102b857600080fd5b61019a600160a060020a0360043516610ef5565b34156102d757600080fd5b61019a60046024813581810190830135806020601f8201819004810201604051908101604052818152929190602084018383808284378201915050505050509190803590602001909190803590602001908201803590602001908080601f01602080910402602001604051908101604052818152929190602084018383808284378201915050505050509190803590602001908201803590602001908080601f0160208091040260200160405190810160405281815292919060208401838380828437509496505093359350610f4592505050565b34156103b757600080fd5b6103fd60046024813581810190830135806020601f8201819004810201604051908101604052818152929190602084018383808284375094965061107295505050505050565b60405190815260200160405180910390f35b341561041a57600080fd5b61019a600160a060020a0360043516611149565b341561043957600080fd5b61048160046024813581810190830135806020601f82018190048102016040519081016040528181529291906020840183838082843750949650509335935061117892505050565b6040518082600b81111561049157fe5b60ff16815260200191505060405180910390f35b34156104b057600080fd5b6104b8611254565b604051600160a060020a03909116815260200160405180910390f35b34156104df57600080fd5b6104e7611263565b604051901515815260200160405180910390f35b341561050657600080fd5b61019a60046024813581810190830135806020601f820181900481020160405190810160405281815292919060208401838380828437509496505050923560ff16925061127e915050565b341561055c57600080fd5b6105a460046024813581810190830135806020601f82018190048102016040519081016040528181529291906020840183838082843750949650509335935061134192505050565b60405160208082528190810183818151815260200191508051906020019080838360005b838110156105e05780820151838201526020016105c8565b50505050905090810190601f16801561060d5780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b341561062657600080fd5b61019a60046024813581810190830135806020601f820181900481020160405190810160405281815292919060208401838380828437509496505050923560ff169250611432915050565b341561067c57600080fd5b6106c260046024813581810190830135806020601f820181900481020160405190810160405281815292919060208401838380828437509496506114d095505050505050565b604051808360018111156106d257fe5b60ff1681526020018260038111156106e657fe5b60ff1681526020019250505060405180910390f35b341561070657600080fd5b61075660046024813581810190830135806020601f82018190048102016040519081016040528181529291906020840183838082843750949650508435946020013560ff1693506115b092505050565b60405182815260406020820181815290820183818151815260200191508051906020019080838360005b83811015610798578082015183820152602001610780565b50505050905090810190601f1680156107c55780820380516001836020036101000a031916815260200191505b50935050505060405180910390f35b34156107df57600080fd5b6105a460046024813581810190830135806020601f8201819004810201604051908101604052818152929190602084018383808284375094965050933593506116ce92505050565b341561083257600080fd5b6103fd60046024813581810190830135806020601f8201819004810201604051908101604052818152929190602084018383808284375094965050933593506117bf92505050565b341561088557600080fd5b6103fd60046024813581810190830135806020601f82018190048102016040519081016040528181529291906020840183838082843750949650509335935061187992505050565b34156108d857600080fd5b6105a460046024813581810190830135806020601f82018190048102016040519081016040528181529291906020840183838082843750949650509335935061193392505050565b341561092b57600080fd5b6103fd6119f5565b341561093e57600080fd5b61019a60046024813581810190830135806020601f820181900481020160405190810160405281815292919060208401838380828437509496505050923560ff1692506119fa915050565b341561099457600080fd5b6103fd60046024813581810190830135806020601f82018190048102016040519081016040528181529291906020840183838082843750949650611a9895505050505050565b34156109e557600080fd5b6105a460046024813581810190830135806020601f820181900481020160405190810160405281815292919060208401838380828437509496505093359350611b4c92505050565b3415610a3857600080fd5b61019a60046024813581810190830135806020601f8201819004810201604051908101604052818152929190602084018383808284378201915050505050509190803590602001908201803590602001908080601f01602080910402602001604051908101604052818152929190602084018383808284378201915050505050509190803590602001908201803590602001908080601f01602080910402602001604051908101604052818152929190602084018383808284378201915050505050509190803590602001908201803590602001908080601f01602080910402602001604051908101604052818152929190602084018383808284378201915050505050509190803590602001908201803590602001908080601f01602080910402602001604051908101604052818152929190602084018383808284378201915050505050509190803590602001908201803590602001908080601f016020809104026020016040519081016040528181529291906020840183838082843750949650611c0e95505050505050565b3415610bd357600080fd5b61019a60046024813581810190830135806020601f82018190048102016040519081016040528181529291906020840183838082843750949650611d7195505050505050565b6000836040518082805190602001908083835b60208310610c4b5780518252601f199092019160209182019101610c2c565b6001836020036101000a0380198251168184511617909252505050919091019250604091505051908190039020600254909150600160a060020a031663673e639b82858560405160e060020a63ffffffff861602815260048101848152602482018490529060440182600b811115610cbf57fe5b60ff1681526020019350505050600060405180830381600087803b1515610ce557600080fd5b6102c65a03f11515610cf657600080fd5b50505050505050565b6000826040518082805190602001908083835b60208310610d315780518252601f199092019160209182019101610d12565b6001836020036101000a0380198251168184511617909252505050919091019250604091505051908190039020600154909150600160a060020a031663a692eabd828460405160e060020a63ffffffff851602815260048101929092526024820152604401600060405180830381600087803b1515610daf57600080fd5b6102c65a03f11515610dc057600080fd5b505050505050565b600080856040518082805190602001908083835b60208310610dfb5780518252601f199092019160209182019101610ddc565b6001836020036101000a038019825116818451161790925250505091909101925060409150505180910390209150610e3283611e33565b600254909150600160a060020a031663b7973ad98387878560405160e060020a63ffffffff8716028152600481018581526024820185905290604401836009811115610e7a57fe5b60ff168152602081019290925250604090810193506000925090505180830381600087803b1515610eaa57600080fd5b6102c65a03f11515610ebb57600080fd5b505050505050505050565b6001805473ffffffffffffffffffffffffffffffffffffffff1916600160a060020a0392909216919091179055565b600054600160a060020a0316610f0a81611e5c565b1515610f1557600080fd5b506000805473ffffffffffffffffffffffffffffffffffffffff1916600160a060020a0392909216919091179055565b600080610f50612267565b876040518082805190602001908083835b60208310610f805780518252601f199092019160209182019101610f61565b6001836020036101000a038019825116818451161790925250505091909101925060409150505180910390209250610fb786611e33565b9150610fc285611e95565b600254909150600160a060020a0316638d57d99d848985858960405160e060020a63ffffffff88160281526004810186815260248201869052604482018590529060640183604080838360005b8381101561102757808201518382015260200161100f565b5050505090500182815260200195505050505050600060405180830381600087803b151561105457600080fd5b6102c65a03f1151561106557600080fd5b5050505050505050505050565b600080826040518082805190602001908083835b602083106110a55780518252601f199092019160209182019101611086565b6001836020036101000a0380198251168184511617909252505050919091019250604091505051908190039020600154909150600160a060020a0316632fa7af098260006040516020015260405160e060020a63ffffffff84160281526004810191909152602401602060405180830381600087803b151561112657600080fd5b6102c65a03f1151561113757600080fd5b50505060405180519250505b50919050565b6002805473ffffffffffffffffffffffffffffffffffffffff1916600160a060020a0392909216919091179055565b600080836040518082805190602001908083835b602083106111ab5780518252601f19909201916020918201910161118c565b6001836020036101000a0380198251168184511617909252505050919091019250604091505051908190039020600254909150600160a060020a031663a55f9927828560006040516020015260405160e060020a63ffffffff851602815260048101929092526024820152604401602060405180830381600087803b151561123257600080fd5b6102c65a03f1151561124357600080fd5b505050604051805195945050505050565b600054600160a060020a031690565b6000805461127990600160a060020a0316611e5c565b905090565b6000826040518082805190602001908083835b602083106112b05780518252601f199092019160209182019101611291565b6001836020036101000a0380198251168184511617909252505050919091019250604091505051908190039020600154909150600160a060020a031663aa14b072828460405160e060020a63ffffffff8516028152600481018381529060240182600181111561131c57fe5b60ff16815260200192505050600060405180830381600087803b1515610daf57600080fd5b61134961228f565b600080846040518082805190602001908083835b6020831061137c5780518252601f19909201916020918201910161135d565b6001836020036101000a0380198251168184511617909252505050919091019250604091505051908190039020600254909250600160a060020a0316639db9b0f6838660006040516020015260405160e060020a63ffffffff851602815260048101929092526024820152604401602060405180830381600087803b151561140357600080fd5b6102c65a03f1151561141457600080fd5b50505060405180519050905061142981611f0f565b95945050505050565b6000826040518082805190602001908083835b602083106114645780518252601f199092019160209182019101611445565b6001836020036101000a0380198251168184511617909252505050919091019250604091505051908190039020600154909150600160a060020a031663dafa9160828460405160e060020a63ffffffff8516028152600481018381529060240182600181111561131c57fe5b6000806000836040518082805190602001908083835b602083106115055780518252601f1990920191602091820191016114e6565b6001836020036101000a0380198251168184511617909252505050919091019250604091505051908190039020600154909150600160a060020a0316638eaa6ac08260006040516040015260405160e060020a63ffffffff841602815260048101919091526024016040805180830381600087803b151561158557600080fd5b6102c65a03f1151561159657600080fd5b505050604051805190602001805190509250925050915091565b60006115ba61228f565b600080866040518082805190602001908083835b602083106115ed5780518252601f1990920191602091820191016115ce565b6001836020036101000a0380198251168184511617909252505050919091019250604091505051908190039020600254909250600160a060020a0316637b5348c983888860006040516040015260405160e060020a63ffffffff861602815260048101848152602482018490529060440182600b81111561166a57fe5b60ff16815260200193505050506040805180830381600087803b151561168f57600080fd5b6102c65a03f115156116a057600080fd5b50505060405180519060200180519195509091508490506116c082611f0f565b935093505050935093915050565b6116d661228f565b60006116e0612267565b846040518082805190602001908083835b602083106117105780518252601f1990920191602091820191016116f1565b6001836020036101000a0380198251168184511617909252505050919091019250604091505051908190039020600254909250600160a060020a031663d1b317e6838660006040516040015260405160e060020a63ffffffff8516028152600481019290925260248201526044016040805180830381600087803b151561179657600080fd5b6102c65a03f115156117a757600080fd5b50505060405180604001604052905061142981612052565b600080836040518082805190602001908083835b602083106117f25780518252601f1990920191602091820191016117d3565b6001836020036101000a0380198251168184511617909252505050919091019250604091505051908190039020600154909150600160a060020a031663968f6144828560006040516020015260405160e060020a63ffffffff851602815260048101929092526024820152604401602060405180830381600087803b151561123257600080fd5b600080836040518082805190602001908083835b602083106118ac5780518252601f19909201916020918201910161188d565b6001836020036101000a0380198251168184511617909252505050919091019250604091505051908190039020600254909150600160a060020a03166317af53a0828560006040516020015260405160e060020a63ffffffff851602815260048101929092526024820152604401602060405180830381600087803b151561123257600080fd5b61193b61228f565b600080846040518082805190602001908083835b6020831061196e5780518252601f19909201916020918201910161194f565b6001836020036101000a0380198251168184511617909252505050919091019250604091505051908190039020600254909250600160a060020a03166394506930838660006040516020015260405160e060020a63ffffffff851602815260048101929092526024820152604401602060405180830381600087803b151561140357600080fd5b600c81565b6000826040518082805190602001908083835b60208310611a2c5780518252601f199092019160209182019101611a0d565b6001836020036101000a0380198251168184511617909252505050919091019250604091505051908190039020600154909150600160a060020a0316638de654ba828460405160e060020a63ffffffff8516028152600481018381529060240182600381111561131c57fe5b600080826040518082805190602001908083835b60208310611acb5780518252601f199092019160209182019101611aac565b6001836020036101000a0380198251168184511617909252505050919091019250604091505051908190039020600254909150600160a060020a0316637937354c8260006040516020015260405160e060020a63ffffffff84160281526004810191909152602401602060405180830381600087803b151561112657600080fd5b611b5461228f565b600080846040518082805190602001908083835b60208310611b875780518252601f199092019160209182019101611b68565b6001836020036101000a0380198251168184511617909252505050919091019250604091505051908190039020600254909250600160a060020a0316635e7105cc838660006040516020015260405160e060020a63ffffffff851602815260048101929092526024820152604401602060405180830381600087803b151561140357600080fd5b600080600080611c1c612267565b60008b6040518082805190602001908083835b60208310611c4e5780518252601f199092019160209182019101611c2f565b6001836020036101000a038019825116818451161790925250505091909101925060409150505180910390209550611c858b611e33565b9450611c908a611e33565b9350611c9b89611e33565b9250611ca688611e95565b9150611cb187611e33565b600254909150600160a060020a031663d7d6320187878787878760405160e060020a63ffffffff8916028152600481018781526024820187905260448201869052606482018590529060840183604080838360005b83811015611d1e578082015183820152602001611d06565b505050509190910192835250506020019450600093506040925050505180830381600087803b1515611d4f57600080fd5b6102c65a03f11515611d6057600080fd5b505050505050505050505050505050565b6000816040518082805190602001908083835b60208310611da35780518252601f199092019160209182019101611d84565b6001836020036101000a0380198251168184511617909252505050919091019250604091505051908190039020600154909150600160a060020a03166395bc26738260405160e060020a63ffffffff84160281526004810191909152602401600060405180830381600087803b1515611e1b57600080fd5b6102c65a03f11515611e2c57600080fd5b5050505050565b6000611e3d61228f565b508180511515611e505760009150611143565b60208301519392505050565b600081600160a060020a031633600160a060020a03161480611e8f575081600160a060020a031632600160a060020a0316145b92915050565b611e9d612267565b611ea5612267565b600080845191506020821115611efa57611eca611ec586600060206121c2565b611e33565b835250601f198101611ef0611ec5866020808511611ee85784611eeb565b60205b6121c2565b6020840152611f06565b611f0385611e33565b83525b50909392505050565b611f1761228f565b611f1f61228f565b6000806000611f2c61228f565b600060408051805910611f3c5750595b818152601f19601f830116810160200160405290509550600093505b6020841015611fcb576008840260020a880292507fff00000000000000000000000000000000000000000000000000000000000000831615611fc05782868681518110611fa157fe5b906020010190600160f860020a031916908160001a9053506001850194505b600190930192611f58565b84604051805910611fd95750595b818152601f19601f830116810160200160405290509150600090505b848110156120475785818151811061200957fe5b016020015160f860020a900460f860020a0282828151811061202757fe5b906020010190600160f860020a031916908160001a905350600101611ff5565b509695505050505050565b61205a61228f565b61206261228f565b60008060008061207061228f565b6040805180591061207e5750595b818152601f19601f830116810160200160405290509550600093505b600284101561213857600092505b602083101561212d578260080260020a88856002811015156120c657fe5b60200201510291507fff00000000000000000000000000000000000000000000000000000000000000821615612122578186868151811061210357fe5b906020010190600160f860020a031916908160001a9053506001850194505b6001909201916120a8565b60019093019261209a565b846040518059106121465750595b818152601f19601f830116810160200160405290509050600093505b848410156121b75785848151811061217657fe5b016020015160f860020a900460f860020a0281858151811061219457fe5b906020010190600160f860020a031916908160001a905350600190930192612162565b979650505050505050565b6121ca61228f565b6121d261228f565b6121da61228f565b6000869250846040518059106121ed5750595b818152601f19601f830116810160200160405290509150600090505b8481101561225d57828187018151811061221f57fe5b016020015160f860020a900460f860020a0282828151811061223d57fe5b906020010190600160f860020a031916908160001a905350600101612209565b5095945050505050565b604080519081016040526002815b600081526000199190910190602001816122755790505090565b602060405190810160405260008152905600a165627a7a72305820c85bfd61a891e483df20fccdb9a2c4d390859fec2cbaec5d9744a5efbafa624d0029"};

var RwStaffStoreCompiled = {"abi":[{"constant":true,"inputs":[{"name":"identifier","type":"bytes32"}],"name":"revisionDateCount","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_owner","type":"address"}],"name":"transferOwner","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"staffId","type":"bytes32"}],"name":"getStatus","outputs":[{"name":"status","type":"uint8"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"getOwner","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"staffId","type":"bytes32"},{"name":"status","type":"uint8"}],"name":"setStatus","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"identifier","type":"bytes32"}],"name":"get","outputs":[{"name":"category","type":"uint8"},{"name":"staffStatus","type":"uint8"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"isOwner","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"identifier","type":"bytes32"}],"name":"remove","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"identifier","type":"bytes32"},{"name":"index","type":"uint256"}],"name":"getRevisionDate","outputs":[{"name":"staffRevisionDate","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"pre","type":"uint8"},{"name":"post","type":"uint8"},{"name":"rol","type":"uint16"},{"name":"throwError","type":"bool"}],"name":"setPromotion","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"identifier","type":"bytes32"},{"name":"revisionDate","type":"uint256"}],"name":"addRevisionDate","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"identifier","type":"bytes32"},{"name":"category","type":"uint8"}],"name":"update","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"RENEWAL_IDX","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"identifier","type":"bytes32"},{"name":"category","type":"uint8"}],"name":"add","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"}],"bytecode":"0x606060405260008054600160a060020a033316600160a060020a0319909116179055610894806100306000396000f3006060604052600436106100cf5763ffffffff7c01000000000000000000000000000000000000000000000000000000006000350416632fa7af0981146100d45780634fb2e45d146100fc5780635de28ae01461011d578063893d20e8146101495780638de654ba146101785780638eaa6ac0146101945780638f32d59b146101e357806395bc26731461020a578063968f6144146102205780639897863414610239578063a692eabd14610264578063aa14b0721461027d578063d4d4885b14610299578063dafa9160146102ac575b600080fd5b34156100df57600080fd5b6100ea6004356102c8565b60405190815260200160405180910390f35b341561010757600080fd5b61011b600160a060020a0360043516610301565b005b341561012857600080fd5b610133600435610351565b60405160ff909116815260200160405180910390f35b341561015457600080fd5b61015c6103a3565b604051600160a060020a03909116815260200160405180910390f35b341561018357600080fd5b61011b60043560ff602435166103b3565b341561019f57600080fd5b6101aa6004356104b2565b604051808360018111156101ba57fe5b60ff1681526020018260038111156101ce57fe5b60ff1681526020019250505060405180910390f35b34156101ee57600080fd5b6101f66104ff565b604051901515815260200160405180910390f35b341561021557600080fd5b61011b60043561051a565b341561022b57600080fd5b6100ea600435602435610580565b341561024457600080fd5b61011b60ff6004358116906024351661ffff6044351660643515156105ee565b341561026f57600080fd5b61011b600435602435610684565b341561028857600080fd5b61011b60043560ff602435166106d9565b34156102a457600080fd5b6100ea610753565b34156102b757600080fd5b61011b60043560ff60243516610758565b60008181526001602081905260408220015462010000900460ff1615156102ee57600080fd5b5060009081526002602052604090205490565b600054600160a060020a0316610316816107f1565b151561032157600080fd5b506000805473ffffffffffffffffffffffffffffffffffffffff1916600160a060020a0392909216919091179055565b60008181526001602081905260408220015462010000900460ff16151561037757600080fd5b60008281526001602081905260409091200154610100900460ff16600381111561039d57fe5b92915050565b600054600160a060020a03165b90565b60008054600160a060020a03166103c9816107f1565b15156103d457600080fd5b6000848152600160208190526040909120015462010000900460ff1615156103fb57600080fd5b60008481526001602081905260408220015460039190610100900460ff168281111561042357fe5b60ff1660ff168152602001908152602001600020600084600381111561044557fe5b60ff908116825260208201929092526040016000208054909350620100009004161561047057600080fd5b815461ffff16156104ac57600084815260016020819052604090912001805484919061ff0019166101008360038111156104a657fe5b02179055505b50505050565b600081815260016020819052604082200154819062010000900460ff1615156104da57600080fd5b50506000908152600160208190526040909120015460ff808216926101009092041690565b6000805461051590600160a060020a03166107f1565b905090565b600054600160a060020a031661052f816107f1565b151561053a57600080fd5b6000828152600160208190526040909120015462010000900460ff16151561056157600080fd5b50600090815260016020819052604090912001805462ff000019169055565b60008281526001602081905260408220015462010000900460ff1615156105a657600080fd5b60008381526002602052604090205482106105c057600080fd5b60008381526002602052604090208054839081106105da57fe5b906000526020600020900154905092915050565b60008054600160a060020a0316610604816107f1565b151561060f57600080fd5b6003600087600381111561061f57fe5b60ff1660ff168152602001908152602001600020600086600381111561064157fe5b60ff1681526020810191909152604001600020805461ffff191661ffff959095169490941762ff0000191662010000931515939093029290921790925550505050565b6000828152600160208190526040909120015462010000900460ff1615156106ab57600080fd5b60008281526002602052604090208054600181016106c98382610821565b5060009182526020909120015550565b600054600160a060020a03166106ee816107f1565b15156106f957600080fd5b6000838152600160208190526040909120015462010000900460ff16151561072057600080fd5b600083815260016020819052604090912081018054849260ff1990911690838181111561074957fe5b0217905550505050565b600c81565b600054600160a060020a031661076d816107f1565b151561077857600080fd5b6000838152600160208190526040909120015462010000900460ff161561079e57600080fd5b600083815260016020819052604090912081018054849260ff199091169083818111156107c757fe5b02179055505050600090815260016020819052604090912001805462ff0000191662010000179055565b600081600160a060020a031633600160a060020a0316148061039d57505032600160a060020a0390811691161490565b8154818355818115116108455760008381526020902061084591810190830161084a565b505050565b6103b091905b808211156108645760008155600101610850565b50905600a165627a7a723058201dd6acd59f7b495e020b97dc310e5fb84df5ac35df84951ba5304be415e78ab30029"};

var RwCourseStoreCompiled = {"abi":[{"constant":true,"inputs":[{"name":"staffId","type":"bytes32"},{"name":"index","type":"uint256"}],"name":"getRenewalDate","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"action","type":"uint8"},{"name":"currentStatus","type":"uint8"},{"name":"rol","type":"uint16"},{"name":"finalStatus","type":"uint8"},{"name":"posCourse","type":"uint256"},{"name":"titleAction","type":"uint8"}],"name":"setPromotion","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"_owner","type":"address"}],"name":"transferOwner","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"staffId","type":"bytes32"},{"name":"index","type":"uint256"}],"name":"getTitleId","outputs":[{"name":"","type":"bytes32"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"staffId","type":"bytes32"},{"name":"index","type":"uint256"},{"name":"status","type":"uint8"}],"name":"setStatus","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"staffId","type":"bytes32"}],"name":"count","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"staffId","type":"bytes32"},{"name":"index","type":"uint256"},{"name":"status","type":"uint8"}],"name":"getInfo","outputs":[{"name":"","type":"uint256"},{"name":"","type":"bytes32"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"getOwner","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"staffId","type":"bytes32"},{"name":"index","type":"uint256"},{"name":"reference","type":"bytes32"},{"name":"center","type":"bytes32[2]"},{"name":"renewalDate","type":"uint256"}],"name":"update","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"isOwner","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"staffId","type":"bytes32"},{"name":"index","type":"uint256"}],"name":"getCourseId","outputs":[{"name":"","type":"bytes32"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"staffId","type":"bytes32"},{"name":"index","type":"uint256"}],"name":"getReference","outputs":[{"name":"","type":"bytes32"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"staffId","type":"bytes32"},{"name":"index","type":"uint256"}],"name":"getStatus","outputs":[{"name":"","type":"uint8"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"staffId","type":"bytes32"},{"name":"index","type":"uint256"},{"name":"action","type":"uint8"},{"name":"hash","type":"bytes32"}],"name":"register","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"staffId","type":"bytes32"},{"name":"index","type":"uint256"}],"name":"getTrainingCenter","outputs":[{"name":"","type":"bytes32[2]"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"RENEWAL_IDX","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"staffId","type":"bytes32"},{"name":"courseId","type":"bytes32"},{"name":"reference","type":"bytes32"},{"name":"titleId","type":"bytes32"},{"name":"center","type":"bytes32[2]"},{"name":"creationHash","type":"bytes32"}],"name":"add","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"}],"bytecode":"0x606060405260008054600160a060020a033316600160a060020a0319909116179055610e00806100306000396000f3006060604052600436106100f05763ffffffff7c010000000000000000000000000000000000000000000000000000000060003504166317af53a081146100f55780632bd32999146101205780634fb2e45d146101595780635e7105cc14610178578063673e639b146101915780637937354c146101b05780637b5348c9146101c6578063893d20e8146101fd5780638d57d99d1461022c5780638f32d59b14610276578063945069301461029d5780639db9b0f6146102b6578063a55f9927146102cf578063b7973ad91461030c578063d1b317e61461032e578063d4d4885b1461037f578063d7d6320114610392575b600080fd5b341561010057600080fd5b61010e6004356024356103e0565b60405190815260200160405180910390f35b341561012b57600080fd5b61015760ff60043581169060243581169061ffff60443516906064358116906084359060a43516610415565b005b341561016457600080fd5b610157600160a060020a0360043516610523565b341561018357600080fd5b61010e600435602435610573565b341561019c57600080fd5b61015760043560243560ff604435166105a7565b34156101bb57600080fd5b61010e600435610631565b34156101d157600080fd5b6101e560043560243560ff60443516610646565b60405191825260208201526040908101905180910390f35b341561020857600080fd5b6102106106db565b604051600160a060020a03909116815260200160405180910390f35b341561023757600080fd5b6101576004803590602435906044359060a4606460026040805190810160405280929190826002602002808284375093955050923592506106eb915050565b341561028157600080fd5b6102896107d1565b604051901515815260200160405180910390f35b34156102a857600080fd5b61010e6004356024356107ec565b34156102c157600080fd5b61010e600435602435610820565b34156102da57600080fd5b6102e8600435602435610854565b6040518082600b8111156102f857fe5b60ff16815260200191505060405180910390f35b341561031757600080fd5b61015760043560243560ff6044351660643561088c565b341561033957600080fd5b610347600435602435610984565b6040518082604080838360005b8381101561036c578082015183820152602001610354565b5050505090500191505060405180910390f35b341561038a57600080fd5b61010e6109f4565b341561039d57600080fd5b610157600480359060243590604435906064359060c4608460026040805190810160405280929190826002602002808284375093955050923592506109f9915050565b60008281526001602052604081208054839081106103fa57fe5b600091825260209091206011601f9092020101549392505050565b600054600160a060020a031661042a81610bbc565b151561043557600080fd5b6080604051908101604052808661ffff16815260200185600b81111561045757fe5b815260200184815260200183600781111561046e57fe5b90526004600089600981111561048057fe5b60ff1660ff168152602001908152602001600020600088600b8111156104a257fe5b60ff16815260208101919091526040016000208151815461ffff191661ffff9190911617815560208201518154829062ff000019166201000083600b8111156104e757fe5b021790555060408201518160010155606082015160028201805460ff1916600183600781111561051357fe5b0217905550505050505050505050565b600054600160a060020a031661053881610bbc565b151561054357600080fd5b506000805473ffffffffffffffffffffffffffffffffffffffff1916600160a060020a0392909216919091179055565b600082815260016020526040812080548390811061058d57fe5b90600052602060002090601f020160040154905092915050565b600054600160a060020a03166105bc81610bbc565b15156105c757600080fd5b6000848152600160205260409020548390116105e257600080fd5b60008481526001602052604090208054839190859081106105ff57fe5b60009182526020909120601e601f9092020101805460ff1916600183600b81111561062657fe5b021790555050505050565b6000818152600160205260409020545b919050565b600083815260016020526040812080548291908590811061066357fe5b90600052602060002090601f020160050183600b81111561068057fe5b600d811061068a57fe5b015460008681526001602052604090208054869081106106a657fe5b90600052602060002090601f020160120184600b8111156106c357fe5b600c81106106cd57fe5b015491509150935093915050565b600054600160a060020a03165b90565b600054600160a060020a031661070081610bbc565b151561070b57600080fd5b60008681526001602052604090205485901161072657600080fd5b600086815260016020526040902080548591908790811061074357fe5b600091825260208083206001601f909302018201939093558882529091526040902080548491908790811061077457fe5b90600052602060002090601f0201600201906002610793929190610c47565b5060008681526001602052604090208054839190879081106107b157fe5b600091825260209091206005601f9092020101600c5b0155505050505050565b600080546107e790600160a060020a0316610bbc565b905090565b600082815260016020526040812080548390811061080657fe5b90600052602060002090601f020160000154905092915050565b600082815260016020526040812080548390811061083a57fe5b90600052602060002090601f020160010154905092915050565b600082815260016020526040812080548390811061086e57fe5b60009182526020909120601f90910201601e015460ff169392505050565b60008481526001602052604081205481908590116108a957600080fd5b60008681526001602052604090208054869081106108c357fe5b90600052602060002090601f02019150600460008560098111156108e357fe5b60ff908116825260208201929092526040016000908120601e850154909216600b81111561090d57fe5b60ff1660ff168152602001908152602001600020905061092c81610bf5565b8054601e830180546201000090920460ff169160ff1916600183600b81111561095157fe5b021790555042826005018260010154600d8110151561096c57fe5b0155600181015483906012840190600c81106107c757fe5b61098c610c87565b60008381526001602052604090208054839081106109a657fe5b90600052602060002090601f02016002016002806020026040519081016040529190828260026020028201915b815481526001909101906020018083116109d3575050505050905092915050565b600c81565b60008054819081908190600160a060020a0316610a1581610bbc565b1515610a2057600080fd5b60008b8152600160205260408120955093508392505b8454831015610a7a5784548a90869085908110610a4f57fe5b60009182526020909120601f90910201541415610a6f5760019350610a7a565b600190920191610a36565b8315610a8557600080fd5b8454610a948660018301610caf565b50845485906000198101908110610aa757fe5b60009182526020909120601f909102018a8155600181018a90559150610ad36002808401908990610c47565b506004820188905542600583015560128201869055601e8201805460ff1916905560008a8152600360205260409020805460018101610b128382610ce0565b91600052602060002090600202016000604080519081016040528e8152885460001901602082015291905081518155602082015160019091015550508715610baf576000888152600260205260409020805460018101610b728382610ce0565b91600052602060002090600202016000604080519081016040528e8152885460001901602082015291905081518155602082015181600101555050505b5050505050505050505050565b600081600160a060020a031633600160a060020a03161480610bef575081600160a060020a031632600160a060020a0316145b92915050565b8054610c049061ffff16610c12565b1515610c0f57600080fd5b50565b60006001821681901115610c3f5760005432600160a060020a0390811691161415610c3f57506001610641565b506000919050565b8260028101928215610c77579160200282015b82811115610c775782518255602090920191600190910190610c5a565b50610c83929150610d0c565b5090565b604080519081016040526002815b60008152600019919091019060200181610c955790505090565b815481835581811511610cdb57601f0281601f028360005260206000209182019101610cdb9190610d26565b505050565b815481835581811511610cdb57600202816002028360005260206000209182019101610cdb9190610d88565b6106e891905b80821115610c835760008155600101610d12565b6106e891905b80821115610c8357600080825560018201819055610d4d6002830182610da8565b6004820160009055600582016000610d659190610db6565b610d73601283016000610dc5565b50601e8101805460ff19169055601f01610d2c565b6106e891905b80821115610c835760008082556001820155600201610d8e565b506000815560010160009055565b50610c0f90600d810190610d0c565b50610c0f90600c810190610d0c5600a165627a7a723058209eb7dc362db575db634846bbf387c2f5a773960dd554f2c603aa542fe0ee27160029"};


var railwayAddressDefault = "0x1349f3e1b8d71effb47b840594ff27da7e603d17";
var staffstoreAddressDefault = "0x9d13c6d3afe1721beef56b55d303b09e021e27ab";
var coursestoreAddressDefault = "0x8a5e2a6343108babed07899510fb42297938d41f";
var coursestoreAddressDefault2 = "0xd9d64b7dc034fafdba5dc2902875a67b5d586420";

var railwayAddress = "";
var staffstoreAddress = "";
var coursestoreAddress = "";

var owner = web3.personal.listAccounts[0];
var user1 = web3.personal.listAccounts[1];

console.log("Unlocking owner");
web3.personal.unlockAccount(owner, "", 15000);
console.log("Unlocking user1");
web3.personal.unlockAccount(user1, "garfield123", 15000);

var railwaySecurityContract = web3.eth.contract(RailwaySecurityCompiled.abi);
var staffStoreContract = web3.eth.contract(RwStaffStoreCompiled.abi);
var courseStoreContract = web3.eth.contract(RwCourseStoreCompiled.abi);

var railway = {}; 		// eth.contract(RailwaySecurityCompiled.abi).at(railwayAddress);
var staffstore = {};	// eth.contract(RwStaffStoreCompiled.abi).at(staffstoreAddress);
var coursestore = {};	// eth.contract(RwCourseStoreCompiled.abi).at(coursestoreAddress);

var deployGas = 6712390;
var transGas = 600000;

var Actor = {
    'NONE': 0,
    'RS' : 1, 
    'RO' : 2,
    'RF' : 4, 
    'RRHH' : 8, 
    'CF' : 16, 
    'CM' : 32, 
    'PF' : 64
};

var StaffStatus = {
    'NotEnabled' : 0,
    'Enabled' : 1,
    'Suspended' : 2,
    'Revoked' : 3
};

var CourseStatus = {
    'Created' : 0,
    'Planned' : 1,
    'Requested' : 2,
    'Offered' : 3,
    'Approved' : 4,
    'NotApproved' : 5,
    'InProgress' : 6,
    'Passed' : 7,
    'Failed' : 8,
    'Notified' : 9,
    'Rejected' : 10,
    'Expired' : 11
};

var CourseAction = {
    'Plan' : 0,
    'Request' : 1,
    'Offer' : 2,
    'Confirm' : 3,
    'Start' : 4,
    'Pass' : 5,
    'Fail' : 6,
    'Notify' : 7,
    'Reject' : 8,
    'Expire' : 9
};

var deployRailwaySecurity = function(owner, deployRailwayCallback) {
    railwaySecurityContract.new( {
        from: owner,
        data: RailwaySecurityCompiled.bytecode,
        gas: deployGas
    }, function (e, contract) {
        if (e) {
            console.log("Error creating RailwaySecurity contract ", e);
        } else {
            if (!contract.address) {
                console.log('Waiting for RailwaySecurity. TransactionHash: ' + contract.transactionHash);
            } else {
                console.log('RailwaySecurity contract mined! address: "' + contract.address + '"\n');
                deployRailwayCallback(contract);
            }
        }
    });
}

var deployStaffStore = function(owner, deployStaffStoreCallback) {
    staffStoreContract.new( {
        from: owner,
        data: RwStaffStoreCompiled.bytecode,
        gas: deployGas
    }, function (e, contract) {
        if (e) {
            console.log("Error creating StaffStore contract ", e);
        } else {
            if (!contract.address) {
                console.log('Waiting for StaffStore. TransactionHash: ' + contract.transactionHash);
            } else {
                console.log('StaffStore contract mined! address: "' + contract.address + '"\n');
                deployStaffStoreCallback(contract);
            }
        }
    });
}

var deployCourseStore = function(owner, deployCourseStoreCallback) {
    courseStoreContract.new( {
        from: owner,
        data: RwCourseStoreCompiled.bytecode,
        gas: deployGas
    }, function (e, contract) {
        if (e) {
            console.log("Error creating CourseStore contract ", e);
        } else {
            if (!contract.address) {
                console.log('Waiting for CourseStore. TransactionHash: ' + contract.transactionHash);
            } else {
                console.log('CourseStore contract mined! address: "' + contract.address + '"\n');
                deployCourseStoreCallback(contract);
            }
        }
    });
}

var linkContracts = function(railway, staffstore, coursestore){
    console.log('Linking contracts ');
    railway.setStaffContract(staffstore.address, {from:owner, gas:transGas});
    railway.setCourseContract(coursestore.address, {from:owner, gas:transGas});
    console.log('stores in RailwaySecurity contract done.');

	railwayAddress = railway.address;
	staffstoreAddress = staffstore.address;
	coursestoreAddress = coursestore.address;

    // Print Info
    info();

    // console.log("----------------------- OWNERS -----------------------");
    // console.log('railway: ' + railway.owner());
    // console.log('staffstore: ' + staffstore.owner());
    // console.log('coursestore: ' + coursestore.owner());
}

var deploy = function() {
	console.log('Calling contract creation');
	deployRailwaySecurity(owner, function(railway) {
	    console.log('RailwaySecurity ready, calling StaffStore');
	    deployStaffStore(owner, function(staffstore) {
	        console.log('StaffStore ready, calling CourseStore');
	        deployCourseStore(owner, function(coursestore) {
	            console.log('CourseStore ready, calling final config');
	            linkContracts(railway, staffstore, coursestore);
	        });
	    });
	});
}

// ========================================================================
var staffPromotions = function(staffstore) {
	console.log('Setting Staff Promotions ... ');

    // var onlyBy = Actor.RS & Actor.RO;

    // Cambios de estado comtemplados en el flujo.
    //                      currentStatus,          finalStatus             onlyBy,     throwError
    staffstore.setPromotion(StaffStatus.NotEnabled, StaffStatus.Enabled,    Actor.RS,   false,     {from:owner});
    staffstore.setPromotion(StaffStatus.NotEnabled, StaffStatus.Suspended,  Actor.RS,   false,     {from:owner});
    staffstore.setPromotion(StaffStatus.NotEnabled, StaffStatus.Revoked,    Actor.RS,   false,     {from:owner});

    staffstore.setPromotion(StaffStatus.Enabled,    StaffStatus.Suspended,  Actor.RS,   false,     {from:owner});
    staffstore.setPromotion(StaffStatus.Enabled,    StaffStatus.Revoked,    Actor.RS,   false,     {from:owner});

    staffstore.setPromotion(StaffStatus.Suspended,  StaffStatus.Enabled,    Actor.RS,   false,     {from:owner});
    staffstore.setPromotion(StaffStatus.Suspended,  StaffStatus.Revoked,    Actor.RS,   false,     {from:owner});

    staffstore.setPromotion(StaffStatus.Revoked,    StaffStatus.Enabled,    Actor.RS,   false,     {from:owner});
    staffstore.setPromotion(StaffStatus.Revoked,    StaffStatus.Suspended,  Actor.RS,   true,      {from:owner});

    // Cambios de estado no contemplados en el flujo. Activar para permitírselo al RS 
    //                      currentStatus,          finalStatus             onlyBy,     throwError
//  staffstore.setPromotion(StaffStatus.Enabled,    StaffStatus.NotEnabled, Actor.RS,   false,     {from:owner});
//  staffstore.setPromotion(StaffStatus.Suspended,  StaffStatus.NotEnabled, Actor.RS,   false,     {from:owner});
//  staffstore.setPromotion(StaffStatus.Revoked,    StaffStatus.NotEnabled, Actor.RS,   false,     {from:owner});

    // Alternativa para impedir los cambios de estado no contemplados en el flujo, incluso al RS, disparando un error.
    //                      currentStatus,          finalStatus             onlyBy,     throwError
//  staffstore.setPromotion(StaffStatus.NotEnabled, StaffStatus.Suspended,  Actor.NONE, true,      {from:owner});
//  staffstore.setPromotion(StaffStatus.NotEnabled, StaffStatus.Revoked,    Actor.NONE, true,      {from:owner});
//  staffstore.setPromotion(StaffStatus.Enabled,    StaffStatus.NotEnabled, Actor.NONE, true,      {from:owner});
//  staffstore.setPromotion(StaffStatus.Suspended,  StaffStatus.NotEnabled, Actor.NONE, true,      {from:owner});
//  staffstore.setPromotion(StaffStatus.Revoked,    StaffStatus.NotEnabled, Actor.NONE, true,      {from:owner});
	console.log('--> done.');
};

var coursePromotions = function(coursestore) {
	console.log('Setting Course Promotions ... ');

    // var onlyBy = Actor.RS & Actor.RO;
    //                       courseAction,         currentStatus,           onlyBy,   finalStatus,        posCourse, titleAction
    coursestore.setPromotion(CourseAction.Plan,    CourseStatus.Created,    Actor.RS, CourseStatus.Planned,     1,        0, {from:owner});
    coursestore.setPromotion(CourseAction.Reject,  CourseStatus.Created,    Actor.RS, CourseStatus.Rejected,   10,        0, {from:owner});
    coursestore.setPromotion(CourseAction.Request, CourseStatus.Planned,    Actor.RS, CourseStatus.Requested,   2,        0, {from:owner});
    coursestore.setPromotion(CourseAction.Offer,   CourseStatus.Requested,  Actor.RS, CourseStatus.Offered,     3,        0, {from:owner});
    coursestore.setPromotion(CourseAction.Confirm, CourseStatus.Offered,    Actor.RS, CourseStatus.Approved,    4,        0, {from:owner});
    coursestore.setPromotion(CourseAction.Reject,  CourseStatus.Offered,    Actor.RS, CourseStatus.NotApproved, 5,        0, {from:owner});
    coursestore.setPromotion(CourseAction.Start,   CourseStatus.Approved,   Actor.RS, CourseStatus.InProgress,  6,        0, {from:owner});
    coursestore.setPromotion(CourseAction.Pass,    CourseStatus.InProgress, Actor.RS, CourseStatus.Passed,      7,        0, {from:owner});
    coursestore.setPromotion(CourseAction.Fail,    CourseStatus.InProgress, Actor.RS, CourseStatus.Failed,      8,        0, {from:owner});
    coursestore.setPromotion(CourseAction.Notify,  CourseStatus.Passed,     Actor.RS, CourseStatus.Passed,      9,        0, {from:owner});
    coursestore.setPromotion(CourseAction.Notify,  CourseStatus.Failed,     Actor.RS, CourseStatus.Failed,      9,        0, {from:owner});
    coursestore.setPromotion(CourseAction.Expire,  CourseStatus.Passed,     Actor.RS, CourseStatus.Expired,    10,        0, {from:owner});
	console.log('--> done.');
};

var info = function() {
    console.log('-------------------------- CONTRACTS INFO -------------------------');
    console.log('RailwaySecurity address = ' + railwayAddress);
    console.log('StaffStore address = ' + staffstoreAddress);
    console.log('CourseStore address = ' + coursestoreAddress);
    console.log('-------------------------------------------------------------------');
};

var setContracts = function() {
	if (railwayAddress == "") {
		railwayAddress = railwayAddressDefault;
	}
	if (staffstoreAddress == "") {
		staffstoreAddress = staffstoreAddressDefault;
	}
	if (coursestoreAddress == "") {
		coursestoreAddress = coursestoreAddressDefault;
	}
	railway = eth.contract(RailwaySecurityCompiled.abi).at(railwayAddress);
	staffstore = eth.contract(RwStaffStoreCompiled.abi).at(staffstoreAddress);
	coursestore = eth.contract(RwCourseStoreCompiled.abi).at(coursestoreAddress);
};

var init = function() {
	setContracts();
	info();
	console.log('Set promotions');
	staffPromotions(staffstore);
	coursePromotions(coursestore);
	console.log('Promotions configured');
}

var manage = function() {
	setContracts();
	info();
	console.log('Ready');
}

var push = function() {
	loadScript('script1.js');
}

var test = function() {
	setContracts();
	// info();

    console.log('--------------------------- STAFF TEST ----------------------------');
	var staffId = '98765432M';
	var staff;
	railway.addStaff(staffId, 0, {from:owner, gas:transGas});
	console.log('Staff created.');

	staff = railway.getStaff(staffId, {from:owner});
	console.log('Staff Attributes - category(' + staff[0] + ') status(' + staff[1] + ')');

	staff = railway.updateStaff(staffId, 1, {from:owner});
	console.log('Staff updated.');

	staff = railway.getStaff(staffId, {from:owner});
	console.log('Staff Attributes - category(' + staff[0] + ') status(' + staff[1] + ')');

	// staff = railway.deleteStaff(staffId, {from:owner});
	// console.log('Staff deleted.');

	// staff = railway.getStaff(staffId, {from:owner});
	// console.log('Staff Attributes - category(' + staff[0] + ') status(' + staff[1] + ')');

    console.log('-------------------------- COURSE TEST ----------------------------');
	var courseId = 'CourseId201812';
	var courseRef = 'CourseRef201812';
	var courseTitleId = '';
	var courseCenter = 'TrainingCenter';
	var courseCreationHash = 'CourseCreationHash';

	railway.addCourse(staffId, courseId, courseRef, courseTitleId, courseCenter, courseCreationHash, {from:owner, gas:transGas});
	console.log('Course created.');

	var courseCount = railway.courseCount(staffId, {from:owner});
	console.log('Course count: ' + courseCount);

	var index = courseCount - 1;
	var courseId2 = railway.getCourseId(staffId, index, {from:owner});
	var courseRef2 = railway.getCourseReference(staffId, index, {from:owner});
	var courseTitleId2 = railway.getCourseTitleId(staffId, index, {from:owner});
	var courseCenter2 = railway.getCourseTrainingCenter(staffId, index, {from:owner});
	var courseRenewalDate = railway.getCourseRenewalDate(staffId, index, {from:owner});
	console.log('Course Attributes - courseId(' + courseId2 + ') courseRef(' + courseRef2 + ') courseTitleId(' + courseTitleId2 +  ') courseCenter(' + courseCenter2 + ') courseRenewalDate(' + courseRenewalDate + ')');

	var courseInfo = railway.getCourseInfo(staffId, index, 0, {from:owner});
	console.log('Course Info - date(' + courseInfo[0] + ') hash(' + courseInfo[1] + ')');

	var newCourseRef = 'CourseRef201901';
	var newCourseCenter = 'NewTrainingCenter';
	var newCourseRenewalDate = '112233445566778899';
	railway.updateCourse(staffId, index, newCourseRef, newCourseCenter, newCourseRenewalDate, {from:owner, gas:transGas});
	console.log('Course updated.');

	courseId2 = railway.getCourseId(staffId, index, {from:owner});
	courseRef2 = railway.getCourseReference(staffId, index, {from:owner});
	courseCenter2 = railway.getCourseTrainingCenter(staffId, index, {from:owner});
	courseRenewalDate = railway.getCourseRenewalDate(staffId, index, {from:owner});
	console.log('Course Attributes - courseId(' + courseId2 + ') courseRef(' + courseRef2 + ') courseCenter(' + courseCenter2 + ') courseRenewalDate(' + courseRenewalDate + ')');
}

var usage = function() {
	console.log('Usage: ');
	console.log('     deploy() -> Deploy contracts.');
	console.log('     init()   -> Initialize and configure contracts.');
	console.log('     manage() -> Manage contracts.');
	console.log('     info()   -> Print contracts information.');
	console.log('     push()   -> Push contracts deployment.');
	console.log('     test()   -> Execute a simple use case.')
	console.log('     usage()  -> Show this help.');
}

usage();
